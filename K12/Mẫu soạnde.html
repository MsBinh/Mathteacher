<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>T√ÄI LI·ªÜU TO√ÅN H·ªåC</title>

  <!-- Polyfill ES6 -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>

  <!-- MathJax -->
  <script async id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <!-- Tailwind CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Slick Carousel -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>

  <!-- Font Awesome -->
   <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
 

  <!-- Custom CSS -->
  <link rel="stylesheet" href="styles1.css">
</head>

<style>
        .main-content {
            width: 100%;
            background: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 30px;
            overflow-wrap: break-word;
            word-wrap: break-word;
        }

        .article-title {
            color: var(--primary-color);
            font-size: 28px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary-color);
            text-align: center;
        }

        .doc-subtitle {
            color: #555;
            font-size: 18px;
            margin-bottom: 15px;
            text-align: center;
        }

        .doc-meta {
            display: flex;
            justify-content: center;
            gap: 20px;
            color: #666;
            font-size: 14px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .doc-meta i {
            color: var(--primary-color);
            margin-right: 5px;
        }

        .article-subtitle {
            color: var(--primary-color);
            font-size: 22px;
            padding-bottom: 8px;
            border-bottom: 1px dashed #ccc;
            margin: 30px 0 15px;
            display: flex;
            align-items: center;
        }

        .article-subtitle i {
            margin-right: 10px;
            font-size: 20px;
        }

    canvas {
        border: 1px solid #000;
        max-width: 100%;
        height: auto;
    }
    .drawing-tools button {
        touch-action: manipulation;
        min-width: 60px;
        min-height: 60px;
        font-size: 1.2rem;
        margin: 5px;
    }
    .nav-menu {
        display: flex;
        gap: 1rem;
    }
    #menu-toggle {
        display: none;
    }
    @media (max-width: 640px) {
        .nav-menu {
            display: none;
            flex-direction: column;
            position: absolute;
            top: 60px;
            left: 0;
            right: 0;
            background: #1e3a8a; /* M√†u n·ªÅn t∆∞∆°ng t·ª± header */
            padding: 1rem;
        }
        .nav-menu.active {
            display: flex;
        }
        #menu-toggle {
            display: block;
            font-size: 1.5rem;
            background: none;
            border: none;
            color: white;
        }
    }
   
        
        .summary-box {
             background-color: #0b3a2e;
            color: #ffffff;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 5px solid #ef4444;
        }
        .options {
            margin: 10px 0;
        }
        .option {
            margin: 5px 0;
        }
        .answer-check {
            margin-top: 10px;
        }
        .answer-check button {
            padding: 12px 24px;
            background: #ef0909;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .answer-check button:hover {
            background: #d10808;
        }
        .answer-feedback {
            margin-top: 10px;
            font-weight: bold;
        }
        .correct {
            color: #22c55e;
        }
        .incorrect {
            color: #ef4444;
        }
        
        .solution {
            background-color: #0b3a2e;
            color: #ffffff;
            font-family: 'Courier New', 'Segoe Script', cursive;
            padding: 15px;
            margin-top: 15px;
            border-radius: 8px;
            border: 1px solid #0a2e23;
            box-shadow: 2px 2px 8px rgba(0,0,0,0.4);
            display: none;
        }
        .solution.visible {
          display: block;
          color: rgb(241, 243, 241);
        }
        

        .solution-toggle {
         margin-left: 10px;
         padding: 4px 10px;
         cursor: pointer;
        background-color: #0b3a2e;
        color: white;
         border: 1px solid white;
        border-radius: 4px;
        }

        .solution-toggle:hover {
         background-color: #145a47;
        }
        
        .hot {
            color: #ef4444;
            font-weight: bold;
        }
        img {
            max-width: 100%;
            height: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        table, th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
        }
        th {
            background: #6b21a8;
            color: white;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }
        .navigation button {
            padding: 12px 24px;
            background: #6b21a8;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .navigation button:hover {
            background: #5b1a8b;
        }
        .navigation button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        @media (max-width: 640px) {
            h1 { font-size: 1.6rem; }
            h2 { font-size: 1.6rem; }
            h3 { font-size: 1.3rem; }
            .card { padding: 15px; }
            .header .logo { font-size: 1.4rem; }
            .nav-bar { top: 50px; flex-direction: column; align-items: flex-start; }
            .nav-bar a { font-size: 0.9rem; margin-right: 10px; }
            .dropdown-button { font-size: 0.9rem; padding: 6px 12px; }
            .dropdown-content { min-width: 80px; }
            table { font-size: 0.85rem; }
            .answer-check button, .navigation button {
                padding: 8px 16px;
                font-size: 0.9rem;
            }
            .score-section {
    background-color: #ecfdf5;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 20px;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
    text-align: center;
}

#score-result {
    margin-top: 10px;
    font-weight: bold;
}

#score-result.correct {
    color: #22c55e;
}

#score-result.incorrect {
    color: #ef4444;
}
        }
    
.question img, .solution img {
    display: block;
    margin: 10px auto;
    width: 400px;
    height: 300px;
    object-fit: contain;
    object-position: center;
    background: white;
}
.question img.long-image, .solution img.long-image {
    height: auto;
    max-width: 100%;
}

.question img, .solution img {
    display: block;
    margin: 5px auto; /* Gi·∫£m kho·∫£ng c√°ch */
    width: 300px; /* Gi·∫£m chi·ªÅu r·ªông */
    height: 100px; /* Gi·∫£m chi·ªÅu cao */
    object-fit: contain;
    object-position: center;
    background: white;
}
.question img.long-image, .solution img.long-image {
    height: auto;
    max-width: 100%; /* ƒê·∫£m b·∫£o v·ª´a v·ªõi m√†n h√¨nh nh·ªè */
}
.question img:not([src]), .solution img:not([src]),
.question img[src=''], .solution img[src=''],
.question img[onerror], .solution img[onerror] {
    display: none !important; /* ·∫®n ·∫£nh kh√¥ng t·ªìn t·∫°i */
}
@media (max-width: 640px) {
    .question img, .solution img {
        width: 100%; /* Chi·ªÅu r·ªông 100% tr√™n di ƒë·ªông */
        height: auto; /* Chi·ªÅu cao t·ª± ƒë·ªông */
        margin: 3px auto; /* Gi·∫£m th√™m kho·∫£ng c√°ch tr√™n di ƒë·ªông */
    }
    .question img.long-image, .solution img.long-image {
        max-width: 100%;
        height: auto;
    }
}

.question img, .solution img {
    display: block;
    margin: 5px auto; /* Kho·∫£ng c√°ch tr√™n laptop */
    width: 300px; /* Chi·ªÅu r·ªông m·∫∑c ƒë·ªãnh */
    height: 200px; /* Chi·ªÅu cao m·∫∑c ƒë·ªãnh */
    object-fit: contain;
    object-position: center;
    background: #0b3a2e;
}
.question img.long-image, .solution img.long-image {
    height: auto;
    max-width: 100%; /* ƒê·∫£m b·∫£o v·ª´a v·ªõi m√†n h√¨nh nh·ªè */
}
.question img:not([src]), .solution img:not([src]),
.question img[src=''], .solution img[src=''],
.question img[onerror], .solution img[onerror] {
    display: none !important; /* ·∫®n ·∫£nh kh√¥ng t·ªìn t·∫°i */
}
@media (max-width: 640px) {
    .question img, .solution img {
        max-width: 100%; /* Thu nh·ªè theo m√†n h√¨nh */
        width: auto; /* T·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh chi·ªÅu r·ªông */
        height: auto; /* T·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh chi·ªÅu cao */
        margin: 2px auto; /* Gi·∫£m kho·∫£ng c√°ch tr√™n di ƒë·ªông */
    }
    .question img.long-image, .solution img.long-image {
        max-width: 100%;
        height: auto;
    }
}

.question img, .solution img {
    display: block;
    margin: 5px auto; /* CƒÉn gi·ªØa v√† gi·ªØ kho·∫£ng c√°ch nh·ªè */
}
.question img.long-image, .solution img.long-image {
    height: auto;
    max-width: 100%; /* Gi·ªõi h·∫°n chi·ªÅu r·ªông t·ªëi ƒëa */
}
.question img:not([src]), .solution img:not([src]),
.question img[src=''], .solution img[src=''],
.question img[onerror], .solution img[onerror] {
    display: none !important; /* ·∫®n ·∫£nh kh√¥ng t·ªìn t·∫°i */
}
@media (max-width: 640px) {
    .question img, .solution img {
        margin: 2px auto; /* Gi·∫£m kho·∫£ng c√°ch tr√™n di ƒë·ªông */
    }
    .question img.long-image, .solution img.long-image {
        max-width: 100%;
        height: auto;
    }
}
.latex-solution {
  background-color: rgba(0, 0, 0, 0.4);
  color: white;
  font-family: Courier New, monospace;
  font-size: 18px;
  border-radius: 6px;
  padding: 6px;
}
/* th√™m v·∫Ω */
#drawCanvas {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 9998;
  touch-action: none;
}


.toolbar {
  position: fixed;
  top: 100px;
  left: 10px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  padding: 6px;
  z-index: 10000;
  display: flex;
  flex-direction: column;
  gap: 4px;
  width: 48px;
  align-items: center;
}
.toolbar button,
.toolbar select,
.toolbar input[type="color"],
.toolbar input[type="range"] {
  width: 100%;
  font-size: 10px;
  padding: 2px;
  height: 28px;
  box-sizing: border-box;
}

.floating-button {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 10001;
  background: #6b21a8;
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 50px;
  font-size: 16px;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}
</style>
<style>
input[type="text"].short-answer {
  width: 120px;
  padding: 6px;
  background-color: #f0f9ff;
  border: 2px solid #ccc;
  border-radius: 4px;
  font-size: 16px;
  margin-right: 8px;
}
/* Modal ƒêƒÉng Nh·∫≠p */
#login-modal {
  z-index: 50;
}
#login-modal .bg-white {
  background-color: #ffffff;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
  max-width: 400px;
  width: 90%;
}
#login-modal input {
  width: 100%;
  padding: 10px;
  margin-bottom: 16px;
  border: 2px solid #ccc;
  border-radius: 5px;
  font-size: 16px;
}
#login-modal button {
  padding: 12px 24px;
  border: none;
  border-radius: 25px;
  cursor: pointer;
  font-size: 16px;
}
#login-modal button[type="submit"] {
  background: #6b21a8;
  color: white;
}
#login-modal button[type="submit"]:hover {
  background: #5b1a8b;
}
#login-modal button#close-modal {
  background: #6b7280;
  color: white;
}
#login-modal button#close-modal:hover {
  background: #4b5563;
}
#auth-status {
  margin-top: 10px;
  font-weight: bold;
}
@media (max-width: 640px) {
  #login-modal .bg-white {
    width: 95%;
    padding: 15px;
  }
  #login-modal input, #login-modal button {
    font-size: 14px;
    padding: 8px 16px;
  }
}
</style>
</head>
<!-- Canvas v√† thanh c√¥ng c·ª• v·∫Ω n·ªïi -->
<canvas id="drawCanvas" style="display: none;"></canvas>
<div class="toolbar" id="drawToolbar" style="display: none;">
  <select id="tool">
    <option value="pen">‚úèÔ∏è B√∫t</option>
    <option value="line">üìè ƒê∆∞·ªùng</option>
    <option value="rect">‚¨õ Ch·ªØ nh·∫≠t</option>
    <option value="circle">‚ö™ Tr√≤n</option>
    <option value="cube">üì¶ H·ªôp</option>
<option value="cone">üî∫ N√≥n</option>
<option value="cylinder">‚¨§ Tr·ª•</option>
<option value="pyramid">üîª Ch√≥p</option>
<option value="sphere">‚öΩ C·∫ßu</option>
  </select>
  
<input type="range" id="draw-width" min="1" max="5" value="2" />
  <input type="color" id="colorPicker" value="#6b21a8" />
  <button id="clearBtn">üßπ Xo√°</button>
  <button id="saveBtn">üíæ L∆∞u</button>
  <button id="exitBtn">‚ùå Tho√°t</button>
  
</div>
<button id="toggleDraw" class="floating-button">üñäÔ∏è V·∫Ω</button>
<body>
    <!-- Thay th·∫ø to√†n b·ªô ph·∫ßn <header> hi·ªán t·∫°i b·∫±ng code n√†y -->
 <header>
        <div class="header-container">
             <div class="logo">
            <img src="logo3.jpg" alt="" class="logo-img">
            <div class="logo-text">
                <h1>Ths Nguy·ªÖn Thanh B√¨nh </h1>
                <p>Chia s·∫ª & Truy·ªÅn c·∫£m h·ª©ng h·ªçc to√°n</p>
            </div>
        </div>

            <button class="hamburger-btn">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>

            <nav id="mainNav">
                <ul class="main-menu">
                    <li><a href="#">Trang ch·ªß</a></li>
                    <li><a href="HO·∫†T ƒê·ªòNG CHUY√äN M√îN">Gi·ªõi thi·ªáu</a></li>
                    <li><a href="https://meet.google.com/hje-gfpk-erv">H·ªçc online</a></li>
                    <li>
                        <a href="#">T√ÄI LI·ªÜU TO√ÅN H·ªåC <i class="fas fa-chevron-down dropdown-icon"></i></a>
                        <ul class="submenu">
                            <li><a href="#">L·ªõp 1-5</a></li>
                            <li>
                                <a href="#">L·ªõp 6-9 <i class="fas fa-chevron-right nested-dropdown-icon"></i></a>
                                <ul class="nested-sub-menu">
                                    <li><a href="#">To√°n</a></li>
                                    <li><a href="#">L√Ω</a></li>
                                    <li><a href="#">H√≥a</a></li>
                                </ul>
                            </li>
                            <li><a href="daoham - Sao ch√©p.html">L·ªõp 10-12</a></li>
                        </ul>
                    </li>
                    <li><a href="#">ƒê·ªÄ √îN LUY·ªÜN</a></li>
                    <li class="dropdown">
                        <a class="dropdown-button">Ch·ªçn ƒë·ªÅ</a>
                        <div class="dropdown-content">
                            <a href="de1.html">ƒê·ªÅ 1</a>
                            <a href="de2.html">ƒê·ªÅ 2</a>
                            <a href="de3.html">ƒê·ªÅ 3</a>
                            <a href="de4.html">ƒê·ªÅ 4</a>
                            <a href="de5.html">ƒê·ªÅ 5</a>
                            <a href="de6.html">ƒê·ªÅ 6</a>
                            <a href="de7.html">ƒê·ªÅ 7</a>
                            <a href="de8.html">ƒê·ªÅ 8</a>
                            <a href="de9.html">ƒê·ªÅ 9</a>
                            <a href="de10.html">ƒê·ªÅ 10</a>
                            <a href="de11.html">ƒê·ªÅ 11</a>
                            <a href="de12.html">ƒê·ªÅ 12</a>
                            <a href="de13.html">ƒê·ªÅ 13</a>
                        </div>
                    </li>
                   <li><a href="#" class="login-btn" id="login-button">ƒêƒÉng nh·∫≠p</a></li>
                </ul>
            </nav>
        </div>
    
    
    
      </header>


  <!-- Modal ƒêƒÉng Nh·∫≠p -->
  <div id="login-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
    <div class="bg-white p-6 rounded-lg shadow-lg max-w-md w-full">
      <h2 class="text-xl font-bold mb-4 text-center">ƒêƒÉng nh·∫≠p b·∫±ng m√£</h2>
      <form id="code-login-form">
        <input type="text" id="login-code" class="w-full p-2 mb-4 border-2 border-gray-300 rounded-lg" placeholder="Nh·∫≠p m√£ th·∫ª (VD: ABC123DEF4)" required>
        <div class="flex justify-center gap-4">
          <button type="submit" class="px-6 py-2 bg-purple-800 text-white rounded-full hover:bg-purple-900">ƒêƒÉng nh·∫≠p</button>
          <button type="button" id="close-modal" class="px-6 py-2 bg-gray-500 text-white rounded-full hover:bg-gray-600">ƒê√≥ng</button>
        </div>
      </form>
      <div id="auth-status" class="mt-4 text-center font-bold"></div>
    </div>
  </div>





<main class="main-content">
            <div id="documentViewer">
                <h1 class="article-title">CHUY√äN ƒê·ªÄ: ·ª®NG D·ª§NG ƒê·∫†O H√ÄM</h1>
                <p class="doc-subtitle">M√¥n To√°n - L·ªõp 12</p>
                <div class="doc-meta">
                    <span><i class="fas fa-book"></i> 7 d·∫°ng b√†i</span>
                    <span><i class="fas fa-lightbulb"></i> 25 v√≠ d·ª•</span>
                    <span><i class="fas fa-pencil-alt"></i> 50 b√†i t·∫≠p</span>
                    <span><i class="fas fa-calendar-alt"></i> C·∫≠p nh·∫≠t: 20/08/2025</span>
                    <span><i class="fas fa-user-edit"></i> Bi√™n so·∫°n: ThS. Nguy·ªÖn Thanh B√¨nh</span>
                </div>

<!-- C√¢u 1 -->
<div class="question" id="q1">
<div class="summary-box">
<p><strong>C√¢u 1</strong>. Cho ƒë·ªì th·ªã \( y = f(x) \) nh∆∞ h√¨nh v·∫Ω d∆∞·ªõi ƒë√¢y:<br/>
<img alt="" loading="lazy" src="data/anh2/3.1.png"/><br/>

H√†m s·ªë ƒë√£ cho ƒë·ªìng bi·∫øn tr√™n kho·∫£ng n√†o trong c√°c kho·∫£ng sau?</p>

<div class="options">
<label><input name="q1" onchange="showOptionIcon('q1', 'A', 'C')" type="radio" value="A"/> A. \( (-\infty ; 1) \)<span class="option-icon" id="icon-q1-A"></span></label>
<label><input name="q1" onchange="showOptionIcon('q1', 'B', 'C')" type="radio" value="B"/> B. \( (2 ; +\infty) \)<span class="option-icon" id="icon-q1-B"></span></label>
<label><input name="q1" onchange="showOptionIcon('q1', 'C', 'C')" type="radio" value="C"/> C. \( (0 ; 1) \)<span class="option-icon" id="icon-q1-C"></span></label>
<label><input name="q1" onchange="showOptionIcon('q1', 'D', 'C')" type="radio" value="D"/> D. \( (1 ; 2) \)<span class="option-icon" id="icon-q1-D"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkAnswer('q1', 'B')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q1')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q1">
  <h4 class="font-bold mb-2">L·ªùi gi·∫£i chi ti·∫øt:</h4>
  <p>Nh√¨n v√†o ƒë·ªì th·ªã ta th·∫•y h√†m s·ªë <span class="math">\(y=f(x)\)</span> ƒëi l√™n (ƒë·ªìng bi·∫øn) tr√™n kho·∫£ng <span class="math">\((2; +\infty)\)</span>.</p>
  <p>C√°c kho·∫£ng kh√°c: 
    <br/>‚Ä¢ \((-‚àû;1)\): h√†m ƒëang gi·∫£m. 
    <br/>‚Ä¢ \((0;1)\): h√†m ƒëi xu·ªëng. 
    <br/>‚Ä¢ \((1;2)\): h√†m v·∫´n gi·∫£m.
  </p>
  <p>üëâ V·∫≠y ƒë√°p √°n ƒë√∫ng l√† <strong>B</strong>.</p>
</div>

</div>
</div>

<!-- C√¢u 2 -->
<div class="question" id="q2">
<div class="summary-box">
<p><strong>C√¢u 2</strong>. Trong kh√¥ng gian \( Oxyz \), cho m·∫∑t ph·∫≥ng \( (P): 2x + y - z - 1 = 0 \). Vector n√†o d∆∞·ªõi ƒë√¢y l√† m·ªôt vector ph√°p tuy·∫øn c·ªßa m·∫∑t ph·∫≥ng \( (P) \)?</p>

<div class="options">
<label><input name="q2" onchange="showOptionIcon('q2', 'A', 'A')" type="radio" value="A"/> A. \( \overrightarrow{n_3} = (2 ; 1 ; -1) \)<span class="option-icon" id="icon-q2-A"></span></label>
<label><input name="q2" onchange="showOptionIcon('q2', 'B', 'A')" type="radio" value="B"/> B. \( \overrightarrow{n_1} = (2 ; -1 ; 1) \)<span class="option-icon" id="icon-q2-B"></span></label>
<label><input name="q2" onchange="showOptionIcon('q2', 'C', 'A')" type="radio" value="C"/> C. \( \overrightarrow{n_4} = (-2 ; 1 ; 1) \)<span class="option-icon" id="icon-q2-C"></span></label>
<label><input name="q2" onchange="showOptionIcon('q2', 'D', 'A')" type="radio" value="D"/> D. \( \overrightarrow{n_2} = (2 ; 1 ; 1) \)<span class="option-icon" id="icon-q2-D"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkAnswer('q2', 'A')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q2')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q2"></div>
</div>
</div>


<h3>Ph·∫ßn II: Tr·∫Øc Nghi·ªám ƒê√∫ng/Sai - t·ª´ c√¢u 13 ƒë·∫øn c√¢u 16</h3>

<!-- C√¢u 13 -->
<div class="question" id="q13">
<div class="summary-box">
<p><strong>C√¢u 13</strong>. M·ªôt v·∫≠t chuy·ªÉn ƒë·ªông th·∫≥ng c√≥ ƒë·ªì th·ªã v·∫≠n t·ªëc - th·ªùi gian nh∆∞ h√¨nh b√™n:<br/>
<img alt="" loading="lazy" src="data/anh2/3.13.png"/><br/>
<div class="options">
<p>a) T·ªïng qu√£ng ƒë∆∞·ªùng v·∫≠t ƒëi ƒë∆∞·ª£c trong 60(s) ƒë·∫ßu ti√™n l√† 650(m).</p>
<label><input name="q13a" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q13a-ƒê√∫ng"></span></label>
<label><input name="q13a" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q13a-Sai"></span></label>
<p>b) Trong kho·∫£ng th·ªùi gian t·ª´ 0(s) ƒë·∫øn 10(s), ph∆∞∆°ng tr√¨nh v·∫≠n t·ªëc c·ªßa v·∫≠t l√† \( v(t) = \frac{1}{2}t + 10 \, (\mathrm{m/s}) \).</p>
<label><input name="q13b" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q13b-ƒê√∫ng"></span></label>
<label><input name="q13b" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q13b-Sai"></span></label>
<p>c) Trong kho·∫£ng th·ªùi gian t·ª´ 30(s) ƒë·∫øn 60(s), ph∆∞∆°ng tr√¨nh v·∫≠n t·ªëc c·ªßa v·∫≠t l√† \( v(t) = -\frac{1}{2}t + 30 \, (\mathrm{m/s}) \).</p>
<label><input name="q13c" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q13c-ƒê√∫ng"></span></label>
<label><input name="q13c" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q13c-Sai"></span></label>
<p>d) Trong kho·∫£ng th·ªùi gian t·ª´ 10(s) ƒë·∫øn 30(s), v·∫≠t chuy·ªÉn ƒë·ªông ƒë·ªÅu.</p>
<label><input name="q13d" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q13d-ƒê√∫ng"></span></label>
<label><input name="q13d" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q13d-Sai"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkTrueFalseAnswer('q13', ['ƒê√∫ng', 'ƒê√∫ng', 'ƒê√∫ng', 'ƒê√∫ng'])">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q13')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q13"></div>
</div>
</div>


<h3>Ph·∫ßn III: Tr·∫Øc Nghi·ªám Tr·∫£ L·ªùi Ng·∫Øn - t·ª´ c√¢u 17 ƒë·∫øn c√¢u 22</h3>

<!-- C√¢u 17 -->
<div class="question" id="q17">
<div class="summary-box">
<p><strong>C√¢u 17</strong>. C√¢u l·∫°c b·ªô thi·ªán nguy·ªán c·ªßa m·ªôt tr∆∞·ªùng THPT d·ª± ƒë·ªãnh l√†m c√°c b√¨nh hoa b·∫±ng gi·∫•y ƒë·ªÉ b√°n trong m·ªôt h·ªôi ch·ª£ g√¢y qu·ªπ t·ª´ thi·ªán. C·∫ßn 1 gi·ªù ƒë·ªÉ l√†m m·ªôt b√¨nh hoa nh·ªè v√† s·∫Ω b√°n v·ªõi gi√° 100 ngh√¨n ƒë·ªìng v√† 90 ph√∫t ƒë·ªÉ l√†m m·ªôt b√¨nh hoa l·ªõn v√† b√°n v·ªõi gi√° 200 ngh√¨n ƒë·ªìng. Bi·∫øt r·∫±ng c√¢u l·∫°c b·ªô c√≥ 30 gi·ªù ƒë·ªÉ l√†m c√°c b√¨nh hoa v√† mu·ªën t·ªïng s·ªë b√¨nh hoa kh√¥ng qu√° 24 b√¨nh. S·ªë ti·ªÅn l·ªõn nh·∫•t m√† c√¢u l·∫°c b·ªô c√≥ th·ªÉ thu ƒë∆∞·ª£c l√† bao nhi√™u tri·ªáu ƒë·ªìng?</p>
</div>
<div class="answer-check">
<input type="text" id="input-q17" placeholder="Nh·∫≠p ƒë√°p √°n">
<button onclick="checkShortAnswer('q17', '1800')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q17')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q17"></div>
<div class="answer-feedback" id="feedback-q17"></div>
</div>
</div>



 <div class="score-section">
 <h3>T√≠nh t·ªïng ƒëi·ªÉm</h3>
    <p>Nh·∫≠p h·ªç v√† t√™n:</p>
    <input id="student-name" type="text" placeholder="H·ªç v√† t√™n"/>   
<button onclick="calculateScore()">T√≠nh ƒëi·ªÉm</button>
<div id="score-result"></div>
</div>

<footer>
        <div class="footer-container">
            <div class="footer-col">
                <h3>V·ªÅ Educode</h3>
                 <p>EduCode l√† n·ªÅn t·∫£ng h·ªçc online ƒëang tr√™n h√¨nh tr√¨nh x√¢y d∆∞ng, v·ªõi k·ª≥ v·ªçng mang ƒë·∫øn c√°c kh√≥a h·ªçc to√°n ch·∫•t l∆∞·ª£ng cao. Ch√∫ng t√¥i cam k·∫øt gi√∫p b·∫°n n·∫Øm v·ªØng ki·∫øn th·ª©c v√† chu·∫©n b·ªã cho t∆∞∆°ng lai v·ªõi c√°c kh√≥a h·ªçc l√Ω, h√≥a, tin h·ªçc v√† AI s·∫Øp ra m·∫Øt.</p>
                <div class="social-links">
                    <a href="https://www.facebook.com/nguyen.binhthanh.5209"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                    <a href="#"><i class="fab fa-tiktok"></i></a>
                </div>
            </div>
                          
                      
            <div class="footer-col">
                <h3>Li√™n h·ªá</h3>
                <div class="contact-info">
                    <p><i class="fas fa-phone"></i> 0878042368</p>
                    <p><i class="fas fa-envelope"></i> nguyenthanhbinh_thpt_tts@bentre.edu.vn</p>
                </div>
            </div>
            
            <div class="footer-col">
                <h3>Li√™n k·∫øt nhanh</h3>
                <ul>
                    <li><a href="#courses">Kh√≥a h·ªçc to√°n</a></li>
                    <li><a href="#resources">T√†i li·ªáu & ƒê·ªÅ √¥n luy·ªán</a></li>
                    <li><a href="#coming-soon">S·∫Øp ra m·∫Øt: L√Ω, H√≥a, AI</a></li>
                    <li><a href="#blog">Blog EduCode</a></li>
                </ul>
            </div>
            </div>
        
        <div class="copyright">
            <p>¬© 2025 EduCode ‚Äì Th·∫°c sƒ© Nguy·ªÖn Thanh B√¨nh. All Rights Reserved.</p>
        </div>
    </footer>
  <script>
    function showOptionIcon(questionId, selectedValue, correctAnswer) {
      if (!checkedQuestions[questionId]) return;
      ['A', 'B', 'C', 'D'].forEach(letter => {
        const iconSpan = document.getElementById(`icon-${questionId}-${letter}`);
        if (iconSpan) iconSpan.innerHTML = '';
      });
      const icon = selectedValue === correctAnswer ? '‚úÖ' : '‚ùå';
      const selectedSpan = document.getElementById(`icon-${questionId}-${selectedValue}`);
      if (selectedSpan) selectedSpan.innerHTML = icon;
    }

    function showTFOptionIcon(name, selectedValue, correctValue, questionId) {
      if (!checkedQuestions[questionId]) return;
      const icon = selectedValue === correctValue ? '‚úÖ' : '‚ùå';
      const span = document.getElementById(`icon-${name}`);
      if (span) span.innerHTML = icon;
    }

    
    function lockQuestionInputs(questionId) {
    const radios = document.querySelectorAll(`input[name="${questionId}"]`);
    radios.forEach(input => input.disabled = true);
}

    function addSolutionLink(questionId, url) {
      if (!checkedQuestions[questionId]) return;
      const container = document.getElementById(`feedback-${questionId}`);
      if (container && !container.querySelector("a")) {
        const link = document.createElement("a");
        link.href = url;
        link.target = "_blank";
        link.style.marginLeft = "10px";
        link.textContent = "Xem l·ªùi gi·∫£i";
        container.appendChild(link);
      }
    }

    var studentAnswers = {};
    var checkedQuestions = {};
    var isScoreCalculated = false;

    function checkAnswer(questionId, correctAnswer) {
      if (checkedQuestions[questionId]) return;
      const inputs = document.getElementsByName(questionId);
      let selectedAnswer = null;
      for (let input of inputs) {
        if (input.checked) {
          selectedAnswer = input.value;
          break;
        }
      }
      studentAnswers[questionId] = selectedAnswer;
      checkedQuestions[questionId] = true;
      lockQuestionInputs(questionId);
      showOptionIcon(questionId, selectedAnswer, correctAnswer);
      addSolutionLink(questionId, `giai/${questionId}.html`);
    }

    function checkTrueFalseAnswer(questionId, correctAnswers) {
  for (let i = 0; i < correctAnswers.length; i++) {
    const name = questionId + String.fromCharCode(97 + i);
    const inputs = document.getElementsByName(name);
    let selected = '';
    for (const input of inputs) {
      if (input.checked) {
        selected = input.value;
        break;
      }
    }

    const iconId = `icon-${name}`;
    let icon = document.getElementById(iconId);
    if (!icon && inputs.length) {
      icon = document.createElement('span');
      icon.id = iconId;
      icon.className = 'option-icon';
      inputs[0].parentNode.appendChild(icon);
    }
    if (icon) {
      icon.innerHTML = selected === correctAnswers[i] ? '‚úÖ' : '‚ùå';
    }
  }
}
   function checkShortAnswer(questionId, correctAnswer) {
      if (checkedQuestions[questionId]) return;
      const input = document.getElementById('input-' + questionId);
      const feedback = document.getElementById('feedback-' + questionId);

      // T·ª± ƒë·ªông t·∫°o span hi·ªÉn th·ªã n·∫øu ch∆∞a t·ªìn t·∫°i
      let icon = document.getElementById('icon-' + questionId);
      if (!icon && input) {
        icon = document.createElement('span');
        icon.id = 'icon-' + questionId;
        icon.className = 'option-icon';
        icon.setAttribute('aria-label', 'Bi·ªÉu t∆∞·ª£ng ki·ªÉm tra');
        input.insertAdjacentElement('afterend', icon);
      }

      if (!input) {
        feedback.innerHTML = 'L·ªói: Kh√¥ng t√¨m th·∫•y input cho c√¢u h·ªèi!';
        feedback.className = 'answer-feedback incorrect';
        return;
      }

      const value = input.value.trim();
      if (value === '') {
        feedback.innerHTML = 'Vui l√≤ng nh·∫≠p ƒë√°p √°n!';
        feedback.className = 'answer-feedback incorrect';
        if (icon) icon.innerHTML = '';
        return;
      }

      if (!isNaN(correctAnswer)) {
        const numeric = parseFloat(value);
        if (isNaN(numeric)) {
          feedback.innerHTML = 'Vui l√≤ng nh·∫≠p m·ªôt s·ªë h·ª£p l·ªá!';
          feedback.className = 'answer-feedback incorrect';
          if (icon) icon.innerHTML = '';
          return;
        }
        const correct = parseFloat(correctAnswer);
        if (Math.abs(numeric - correct) < 0.001) {
          feedback.innerHTML = 'ƒê√∫ng!';
          feedback.className = 'answer-feedback correct';
          studentAnswers[questionId] = numeric;
          if (icon) icon.innerHTML = '‚úÖ';
        } else {
          feedback.innerHTML = 'Sai!';
          feedback.className = 'answer-feedback incorrect';
          studentAnswers[questionId] = numeric;
          if (icon) icon.innerHTML = '‚ùå';
        }
      } else {
        if (value === correctAnswer) {
          feedback.innerHTML = 'ƒê√∫ng';
            feedback.className = 'answer-feedback correct';
          studentAnswers[questionId] = value;
          if (icon) icon.innerHTML = '‚úÖ';
        } else {
          feedback.innerHTML = 'Sai!';
          feedback.className = 'answer-feedback incorrect';
          studentAnswers[questionId] = value;
          if (icon) icon.innerHTML = '‚ùå';
        }
      }
}
    


function calculateScore() {
  if (isScoreCalculated) return;

  // --- c√°c ƒë√°p √°n ƒë√∫ng (b·∫°n gi·ªØ nguy√™n ho·∫∑c ch·ªânh) ---
  const correctAnswers = {
    q1: 'B', q2: 'A', q3: 'C', q4: 'B', q5: 'A', q6: 'B', q7: 'A', q8: 'B', q9: 'D', q10: 'A', q11: 'C', q12: 'B',
    q13: ['ƒê√∫ng','ƒê√∫ng','ƒê√∫ng','ƒê√∫ng'],
    q14: ['ƒê√∫ng','Sai','ƒê√∫ng','Sai'],
    q15: ['Sai','ƒê√∫ng','ƒê√∫ng','Sai'],
    q16: ['Sai','Sai','ƒê√∫ng','Sai'],
    q17: '1800', q18: '12.4', q19: '0.24', q20: '95', q21: '875', q22: '55.4'
  };

  // Gom ƒë√°p √°n h·ªçc sinh
  const studentAns = {};

  // C√¢u 1-12
  for (let i = 1; i <= 12; i++) {
    const name = 'q' + i;
    const sel = document.querySelector(`input[name="${name}"]:checked`);
    studentAns[name] = sel ? sel.value.trim() : '';
  }

  // C√¢u 13-16 (m·ªói c√¢u 4 m·ªánh ƒë·ªÅ)
  for (let i = 13; i <= 16; i++) {
    const arr = [];
    ['a','b','c','d'].forEach((letter) => {
      const sel = document.querySelector(`input[name="q${i}${letter}"]:checked`);
      arr.push(sel ? sel.value.trim() : '');
    });
    studentAns['q' + i] = arr;
  }

  // C√¢u 17-22 (text)
  for (let i = 17; i <= 22; i++) {
    const el = document.getElementById('input-q' + i);
    studentAns['q' + i] = el ? el.value.trim().replace(',', '.') : '';
  }

  // T√≠nh ƒëi·ªÉm (gi·ªØ logic nh∆∞ b·∫°n ƒë√£ d√πng)
  let totalScore = 0;
  for (let i = 1; i <= 22; i++) {
    const key = 'q' + i;
    const u = studentAns[key];
    const c = correctAnswers[key];

    if (i <= 12) {
      if (u && u === c) totalScore += 0.25;
    } else if (i >= 13 && i <= 16) {
      if (Array.isArray(u) && Array.isArray(c)) {
        let correctCount = 0;
        for (let j = 0; j < c.length; j++) if (u[j] === c[j]) correctCount++;
        if (correctCount === 1) totalScore += 0.1;
        else if (correctCount === 2) totalScore += 0.25;
        else if (correctCount === 3) totalScore += 0.5;
        else if (correctCount === 4) totalScore += 1;
      }
    } else {
      const userVal = parseFloat((u||'').toString().replace(',', '.'));
      const corVal = parseFloat((c||'').toString().replace(',', '.'));
      if (!isNaN(userVal) && !isNaN(corVal) && Math.abs(userVal - corVal) < 0.001) totalScore += 0.5;
    }
  }

  // Hi·ªÉn th·ªã ƒëi·ªÉm
  const scoreElement = document.getElementById("score-result");
  scoreElement.textContent = `T·ªïng ƒëi·ªÉm c·ªßa b·∫°n: ${totalScore.toFixed(2)} / 10`;
  scoreElement.className = (totalScore >= 5 ? 'correct' : 'incorrect');
  isScoreCalculated = true;

  // L∆∞u k·∫øt qu·∫£ l√™n Firestore (g·ªçi h√†m module saveAttempt)
  const studentName = document.getElementById('student-name') ? document.getElementById('student-name').value.trim() : '';
  if (typeof saveAttempt === 'function') {
    try {
      saveAttempt('de2', studentAns, totalScore, studentName);
    } catch (err) {
      console.warn('L∆∞u k·∫øt qu·∫£ th·∫•t b·∫°i (ch∆∞a ƒëƒÉng nh·∫≠p?):', err);
    }
  }
}
  function showVideoSolution(url, qid) {
    if (!allowShowSolution) {
      alert("L·ªùi gi·∫£i ƒëang b·ªã kh√≥a. Li√™n h·ªá gi√°o vi√™n ƒë·ªÉ m·ªü.");
      return;
    }
    window.open(url, '_blank');
  }
   </script>
    <script src="recorder.js"></script>
    <script>
              const canvas = document.getElementById("drawCanvas");
              const ctx = canvas.getContext("2d");
              const toggleBtn = document.getElementById("toggleDraw");
              const toolbar = document.getElementById("drawToolbar");
              const clearBtn = document.getElementById("clearBtn");
              const saveBtn = document.getElementById("saveBtn");
              const exitBtn = document.getElementById("exitBtn");
              const colorPicker = document.getElementById("colorPicker");
              const toolSelect = document.getElementById("tool");
              const widthPicker = document.getElementById("draw-width");
              let lineWidth = 2;

                      widthPicker.oninput = () => {
                        lineWidth = parseInt(widthPicker.value);
                      };
                      let isDrawing = false;
                      let isDrawMode = false;
                      let startX = 0, startY = 0;
                      let currentTool = "pen";
                      let imageBeforeShape;

                      function resizeCanvas() {
                        canvas.width = window.innerWidth;
                        canvas.height = window.innerHeight;
                      }
                      resizeCanvas();
                      window.addEventListener("resize", resizeCanvas);

                      toggleBtn.onclick = () => {
                        isDrawMode = true;
                        canvas.style.display = "block";
                        toolbar.style.display = "flex";
                      };

                      exitBtn.onclick = () => {
                        isDrawMode = false;
                        canvas.style.display = "none";
                        toolbar.style.display = "none";
                      };

                      toolSelect.onchange = () => currentTool = toolSelect.value;
                      clearBtn.onclick = () => {
                        ctx.clearRect(0, 0, canvas.width, canvas.height);

                        // Ghi m·ªôt ·∫£nh r·ªóng l√™n Firebase ƒë·ªÉ ƒë·ªìng b·ªô xo√° cho m·ªçi ng∆∞·ªùi
                        if (typeof saveDrawingToFirebase === "function") {
                          saveDrawingToFirebase(); // L∆∞u canvas tr·ªëng
                        }
                      };

                      saveBtn.onclick = () => {
                        const link = document.createElement("a");
                        link.download = "ban_ve.png";
                        link.href = canvas.toDataURL();
                        link.click();
                      };

                      function getPos(e) {
                        if (e.touches && e.touches.length > 0) {
                          return { x: e.touches[0].clientX, y: e.touches[0].clientY };
                        }
                        return { x: e.clientX, y: e.clientY };
                      }

                      function startDraw(e) {
                        if (!isDrawMode) return;
                        e.preventDefault();
                        const pos = getPos(e);
                        isDrawing = true;
                        startX = pos.x;
                        startY = pos.y;
                        if (currentTool !== "pen") {
                          imageBeforeShape = ctx.getImageData(0, 0, canvas.width, canvas.height);
                        } else {
                          ctx.beginPath();
                          ctx.moveTo(startX, startY);
                        }
                      }

                      function drawMove(e) {
                        if (!isDrawing || !isDrawMode) return;
                        const pos = getPos(e);
                        ctx.strokeStyle = colorPicker.value;
                        ctx.lineWidth = lineWidth;
                        ctx.lineCap = "round";

                        if (currentTool === "pen") {
                          ctx.lineTo(pos.x, pos.y);
                          ctx.stroke();
                        } else {
                          ctx.putImageData(imageBeforeShape, 0, 0);
                          if (currentTool === "line") {
                            ctx.beginPath();
                            ctx.moveTo(startX, startY);
                            ctx.lineTo(pos.x, pos.y);
                            ctx.stroke();
                          } else if (currentTool === "rect") {
                            ctx.strokeRect(startX, startY, pos.x - startX, pos.y - startY);
                          } else if (currentTool === "circle") {
                            const radius = Math.hypot(pos.x - startX, pos.y - startY);
                            ctx.beginPath();
                            ctx.arc(startX, startY, radius, 0, Math.PI * 2);
                            ctx.stroke();
                          }
                          else if (currentTool === "cube") {
                        // V·∫Ω h√¨nh l·∫≠p ph∆∞∆°ng 3D ƒë∆°n gi·∫£n
                        let size = Math.min(Math.abs(pos.x - startX), Math.abs(pos.y - startY));
                        ctx.strokeRect(startX, startY, size, size);
                        ctx.strokeRect(startX + 10, startY - 10, size, size);
                        ctx.beginPath();
                        ctx.moveTo(startX, startY);
                        ctx.lineTo(startX + 10, startY - 10);
                        ctx.moveTo(startX + size, startY);
                        ctx.lineTo(startX + size + 10, startY - 10);
                        ctx.moveTo(startX, startY + size);
                        ctx.lineTo(startX + 10, startY + size - 10);
                        ctx.moveTo(startX + size, startY + size);
                        ctx.lineTo(startX + size + 10, startY + size - 10);
                        ctx.stroke();
                      }
                      else if (currentTool === "cone") {
                        let radius = Math.abs(pos.x - startX);
                        ctx.beginPath();
                        ctx.ellipse(startX, startY + 40, radius, 10, 0, 0, Math.PI * 2);
                        ctx.moveTo(startX - radius, startY + 40);
                        ctx.lineTo(startX, startY - 40);
                        ctx.lineTo(startX + radius, startY + 40);
                        ctx.stroke();
                      }
                      else if (currentTool === "cylinder") {
                        let r = Math.abs(pos.x - startX);
                        ctx.beginPath();
                        ctx.ellipse(startX, startY, r, 10, 0, 0, Math.PI * 2);
                        ctx.moveTo(startX - r, startY);
                        ctx.lineTo(startX - r, startY + 100);
                        ctx.moveTo(startX + r, startY);
                        ctx.lineTo(startX + r, startY + 100);
                        ctx.ellipse(startX, startY + 100, r, 10, 0, 0, Math.PI);
                        ctx.stroke();
                      }
                      else if (currentTool === "pyramid") {
                        ctx.beginPath();
                        ctx.moveTo(startX, startY);
                        ctx.lineTo(startX + 60, startY);
                        ctx.lineTo(startX + 30, startY + 60);
                        ctx.closePath();
                        ctx.moveTo(startX + 30, startY + 60);
                        ctx.lineTo(startX + 30, startY - 40);
                        ctx.stroke();
                      }
                      else if (currentTool === "sphere") {
                        let r = Math.abs(pos.x - startX);
                        ctx.beginPath();
                        ctx.arc(startX, startY, r, 0, Math.PI * 2);
                        ctx.moveTo(startX - r, startY);
                        ctx.ellipse(startX, startY, r, r / 2, 0, 0, Math.PI * 2);
                        ctx.stroke();
                      }

                        }
                      }


                      function endDraw() {
                        if (!isDrawMode) return;
                        isDrawing = false;

                        // Sau khi v·∫Ω xong, l∆∞u l√™n Firebase
                        if (typeof saveDrawingToFirebase === "function") {
                          saveDrawingToFirebase();
                        }
                      }


                      canvas.addEventListener("mousedown", startDraw);
                      canvas.addEventListener("mousemove", drawMove);
                      canvas.addEventListener("mouseup", endDraw);
                      canvas.addEventListener("touchstart", startDraw, { passive: false });
                      canvas.addEventListener("touchmove", drawMove, { passive: false });
                      canvas.addEventListener("touchend", endDraw);
                      </script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp, query, where, getDocs } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

// --- Firebase config ---
const firebaseConfig = {
  apiKey: "AIzaSyDDACFZgZazMOnjzmGM_lrKswVcsoTFHxA",
  authDomain: "veonline-3bcbf.firebaseapp.com",
  projectId: "veonline-3bcbf",
  storageBucket: "veonline-3bcbf.appspot.com",
  messagingSenderId: "83902304195",
  appId: "1:83902304195:web:2f9ec1ee0c23d6e21bb776"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// ===== Toggle l·ªùi gi·∫£i =====
window.toggleSolution = function(solutionId) {
  const solutionBox = document.getElementById(solutionId);
  if (!solutionBox) return alert(`Kh√¥ng t√¨m th·∫•y box l·ªùi gi·∫£i v·ªõi ID: ${solutionId}`);
  const studentCode = localStorage.getItem("studentCode");
  if (studentCode) solutionBox.classList.toggle('visible');
  else document.getElementById('login-modal').classList.remove('hidden');
};

// ===== Form ƒëƒÉng nh·∫≠p =====
const codeForm = document.getElementById('code-login-form');
if (codeForm) {
  codeForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const code = document.getElementById('login-code')?.value?.trim() || '';
    const nameInput = document.getElementById('student-name');
    const name = nameInput ? nameInput.value.trim() : '';

    console.log("üîπ M√£ nh·∫≠p:", code); // debug

    try {
      const codesRef = collection(db, "codes");
      const q = query(codesRef, where("code", "==", code));
      const querySnapshot = await getDocs(q);

      console.log("üîπ S·ªë document t√¨m ƒë∆∞·ª£c:", querySnapshot.size);

      if (!querySnapshot.empty) {
        // L·∫•y document ƒë·∫ßu ti√™n
        const docData = querySnapshot.docs[0].data();
        const studentNameFromDB = docData.name || name;

        localStorage.setItem("studentName", studentNameFromDB);
        localStorage.setItem("studentCode", code);

        document.getElementById('login-modal').classList.add('hidden');
        document.getElementById('auth-status').textContent = '‚úÖ ƒêƒÉng nh·∫≠p th√†nh c√¥ng';
      } else {
        document.getElementById('auth-status').textContent = '‚ùå M√£ kh√¥ng h·ª£p l·ªá';
        document.getElementById('login-modal').classList.remove('hidden');
      }

    } catch (err) {
      console.error(err);
      document.getElementById('auth-status').textContent = '‚ùå L·ªói ƒëƒÉng nh·∫≠p: ' + err.message;
    }
  });
}

// ===== N√∫t ƒëƒÉng nh·∫≠p/ƒëƒÉng xu·∫•t =====
document.getElementById('login-button').addEventListener('click', (e) => {
  e.preventDefault();
  const studentCode = localStorage.getItem("studentCode");
  if (studentCode) {
    localStorage.removeItem("studentName");
    localStorage.removeItem("studentCode");
    document.getElementById('auth-status').textContent = 'ƒê√£ ƒëƒÉng xu·∫•t';
    document.querySelectorAll('.solution').forEach(el => el.classList.remove('visible'));
  } else {
    document.getElementById('login-modal').classList.remove('hidden');
  }
});

// ===== ƒê√≥ng modal =====
document.getElementById('close-modal').addEventListener('click', () => {
  document.getElementById('login-modal').classList.add('hidden');
  document.getElementById('auth-status').textContent = '';
  document.getElementById('login-code').value = '';
});

// ===== L∆∞u k·∫øt qu·∫£ b√†i l√†m =====
window.saveAttempt = async function(testId, answersObject, score) {
  const studentName = localStorage.getItem("studentName") || null;
  const studentCode = localStorage.getItem("studentCode") || null;
  if (!studentCode) return alert('‚ö†Ô∏è Vui l√≤ng nh·∫≠p m√£ tr∆∞·ªõc khi l∆∞u k·∫øt qu·∫£!');

  try {
    await addDoc(collection(db, 'attempts'), {
      name: studentName,
      code: studentCode,
      testId: testId || 'unknown',
      answers: answersObject || {},
      score: score,
      createdAt: serverTimestamp()
    });
    console.log('‚úÖ ƒê√£ l∆∞u b√†i l√†m');
  } catch (err) {
    console.error('‚ùå L∆∞u b√†i l√†m th·∫•t b·∫°i:', err);
  }
};

// ===== Check Answer (icon ƒë√∫ng/sai) =====
window.checkAnswer = function(questionId, correctAnswer) {
  const selected = document.querySelector(`input[name="${questionId}"]:checked`);
  const resultIcons = document.querySelectorAll(`#${questionId} .option-icon`);
  resultIcons.forEach(icon => icon.innerHTML = '');
  if (selected) {
    const icon = document.getElementById(`icon-${questionId}-${selected.value}`);
    icon.innerHTML = selected.value === correctAnswer ? '‚úîÔ∏è' : '‚ùå';
  }
};
 // Toggle hamburger menu
        $('.hamburger-btn').click(function(){
            $(this).toggleClass('active');
            $('#mainNav').toggleClass('active');
        });

        // Submenu
        $('.main-menu > li > a').click(function(e){
            if ($(window).width() <= 768) {
                var $submenu = $(this).siblings('.submenu');
                if ($submenu.length) {
                    e.preventDefault();
                    $submenu.toggleClass('active');
                    $(this).find('.dropdown-icon').toggleClass('active');
                }
            }
        });

        $('.submenu > li > a').click(function(e){
            if ($(window).width() <= 768) {
                var $nestedSubmenu = $(this).siblings('.nested-sub-menu');
                if ($nestedSubmenu.length) {
                    e.preventDefault();
                    $nestedSubmenu.toggleClass('active');
                    $(this).find('.nested-dropdown-icon').toggleClass('active');
                }
            }
        });
    
</script>




</script>




</body>
</html>
