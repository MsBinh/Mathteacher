<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <title>B·∫£ng gi·∫£ng To√°n - Demo ƒë·∫ßy ƒë·ªß (fix c√¥ng th·ª©c d√†i)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Reveal.js CSS -->
  <link rel="stylesheet" href="https://unpkg.com/reveal.js/dist/reveal.css">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js/dist/theme/black.css" id="theme">

  <!-- MathJax -->
  <script>
    MathJax = {
      tex: { 
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$','$$'], ['\\[','\\]']]
      },
      svg: { fontCache: 'global', linebreaks: { automatic: true } },
      chtml: { linebreaks: { automatic: true } }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <!--<link rel="stylesheet" href="styles1.css">-->
  <style>
  /* ===== N·ªÅn b·∫£ng xanh ===== */
  .reveal .backgrounds { background: #1e5631; }
  .reveal section { 
    color: #fffbe7; 
    text-shadow: 1px 1px 2px #000; 
  }
 

  /* ===== Box n·ªôi dung ===== */
  .box {
    padding: 12px;
    margin: 15px 0;
    border-radius: 8px;
    overflow-x: auto;       /* Cho ph√©p cu·ªôn ngang khi c√¥ng th·ª©c d√†i */
    word-wrap: break-word;
    max-width: none;        /* b·ªè gi·ªõi h·∫°n m·∫∑c ƒë·ªãnh */
    width: 100%;
    box-sizing: border-box; /* tr√°nh xung ƒë·ªôt padding */
    font-size: 26px;   /* to√†n b·ªô n·ªôi dung l·ªõn h∆°n */
  }

  /* MathJax container */
  mjx-container {
    overflow-x: auto;
    max-width: 100%;
  }

  /* Styles cho t·ª´ng lo·∫°i box */
  .definition { border-left: 6px solid #3498db; background: rgba(236,245,255,0.15); }
  .theorem    { border-left: 6px solid #27ae60; background: rgba(233,247,239,0.15); }
  .note       { border-left: 6px solid #f39c12; background: rgba(254,245,231,0.15); font-style: italic;}
  .remember   { border-left: 6px solid #e67e22; background: rgba(250,230,210,0.15); font-weight: bold;}
  .dangt      { border-left: 6px solid #8e44ad; background: rgba(245,238,248,0.15); }
  .method     { border-left: 6px solid #16a085; background: rgba(229,245,242,0.15); }
  .example    { border-left: 6px solid #2c3e50; background: rgba(236,240,241,0.15); }

  /* V√≠ d·ª• c√≥ l·ªùi gi·∫£i d√†i: cho cu·ªôn d·ªçc */
  .box.example, 
  .box.solution {
    background: rgba(255,255,255,0.15);
    border-left: 6px solid #9333ea;
    margin-top: 10px;
    max-height: 60vh;   /* gi·ªõi h·∫°n chi·ªÅu cao t·ªëi ƒëa */
    overflow-y: auto;   /* thanh cu·ªôn d·ªçc */
    padding-right: 10px;
    max-width: none;
    width: 95%;
  }

  /* ===== Quiz / Tr·∫Øc nghi·ªám ===== */
  .question, .summary-box {
    max-height: 85vh;   /* full slide nh∆∞ng c√≥ cu·ªôn khi d√†i */
    overflow-y: auto;
    padding: 12px;
    background: rgba(0,0,0,0.2);
    border-radius: 8px;
    width: 95%;
    margin: auto;
    box-sizing: border-box;
  }

  .options label {
    display: block;
    margin-bottom: 6px;
    cursor: pointer;
    line-height: 1.4;
    word-wrap: break-word;
  }

  .option-icon {
    margin-left: 6px;
  }

  .answer-check button {
    margin-top: 8px;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    background: #2563eb; 
    color: white;
    border: none;
  }

  /* Grid chia 2 c·ªôt ho·∫∑c 3 c·ªôt cho quiz */
  .quiz-grid-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    align-items: start;
  }
  .quiz-grid-3 {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 15px;
    align-items: start;
    border-left: 2px solid yellow;
    border-right: 2px solid yellow;
  }

  /* ===== Canvas overlay (b·∫£ng v·∫Ω) ===== */
  #drawCanvas {
    position: fixed; top: 0; left: 0;
    width: 100vw; height: 100vh;
    z-index: 10; pointer-events: none;
  }

  /* ===== Toolbar v·∫Ω ===== */
  #toolbar {
    position: fixed; top: 50%; left: 5px; transform: translateY(-50%);
    z-index: 20; display: flex; flex-direction: column;
    background: rgba(0,0,0,0.4); padding: 4px; border-radius: 8px;
  }
  #toolbar button, #toolbar select {
    margin: 3px 0; width: 36px; height: 36px; font-size: 14px;
    text-align: center; cursor: pointer;
    background: rgba(255,255,255,0.1); border: none; border-radius: 6px;
    color: #fff;
  }
  #toolbar select { width: 42px; height: 28px; font-size: 12px; color: #000; }

  /* Toggle n√∫t menu */
  #toggleMenu {
    position: fixed; top: 10px; left: 10px; z-index: 21;
    width: 36px; height: 36px; border-radius: 50%;
    border: none; background: #0008; color: #fff; font-size: 18px;
    cursor: pointer;
  }
  /* Cho ph√©p section chi·∫øm to√†n b·ªô slide */
.reveal .slides section {
  max-width: 100% !important;   /* üöÄ b·ªè gi·ªõi h·∫°n 800px */
  width: 100% !important;
  height: auto;
}

/* Box c√¢u h·ªèi full chi·ªÅu r·ªông */
.question, .summary-box {
  width: 100% !important;   /* full ngang */
  max-width: 100% !important;
  font-size: 0.9em;         /* tƒÉng font ch·ªØ cho r√µ */
  background: rgba(0,0,0,0.2);
  padding: 15px;
  border-radius: 8px;
  box-sizing: border-box;
  margin: auto;
}

/* H√¨nh ·∫£nh trong c√¢u h·ªèi: cƒÉn gi·ªØa v√† co gi√£n h·ª£p l√Ω */
.question img, .summary-box img {
  max-width: 100%;
  height: auto;
  display: block;
  margin: 10px auto;
}
.option-row {
  display: flex;
  align-items: center;
  gap: 15px;          /* kho·∫£ng c√°ch gi·ªØa text v√† n√∫t ch·ªçn */
  margin-bottom: 8px;
}

.option-row span {
  flex: 1;            /* text chi·∫øm ph·∫ßn c√≤n l·∫°i */
  word-wrap: break-word;
}
.option-row label {
  white-space: nowrap; /* kh√¥ng xu·ªëng d√≤ng ch·ªØ ƒê√∫ng/Sai */
}


</style>

</head>
<body>
<div class="reveal">
  <div class="slides">
<!-------------B·∫ÆT ƒê·∫¶U N·ªòI DUNG C√ÅC SLIDE-->
  <!-- T√äN B√ÄI -->
      <section>
        <h2>üìò ·ª®NG D·ª§NG ƒê·∫†O H√ÄM</h2>
        <p>M√¥n To√°n - L·ªõp 12</p>
      </section>
  <!----L√ù THUY·∫æT-->
      <section>
        <h3>üìò N·ªòI DUNG KI·∫æN TH·ª®C</h3>
        
      </section>
      <!-- Slide 2: ƒê·ªãnh nghƒ©a -->
      <section>
        <div class="box definition">
          <b>üìò ƒê·ªãnh nghƒ©a:</b><br>
          H√†m s·ªë $y=f(x)$ ƒë∆∞·ª£c g·ªçi l√† <b>ƒë·ªìng bi·∫øn</b> tr√™n K n·∫øu:
          $$ \forall x_1 < x_2 \in K \Rightarrow f(x_1) < f(x_2) $$
        </div>
      </section>

      <!-- Slide 3: ƒê·ªãnh l√≠ -->
      <section>
        <div class="box theorem">
          <b>üìê ƒê·ªãnh l√≠:</b><br>
          N·∫øu $f'(x) > 0, \forall x \in K$ th√¨ h√†m s·ªë $f(x)$ ƒë·ªìng bi·∫øn tr√™n K.
        </div>
      </section>

      <!-- Slide 4: Ghi nh·ªõ -->
      <section>
        <div class="box remember">
          üí° Ghi nh·ªõ: Mu·ªën x√©t t√≠nh ƒë∆°n ƒëi·ªáu ‚Üí t√≠nh ƒë·∫°o h√†m $y'$ ‚Üí x√©t d·∫•u c·ªßa $y'$.
        </div>
      </section>

      <!-- Slide 5: D·∫°ng to√°n -->
      <section>
        <div class="box dangt">
          üìù <b>D·∫°ng to√°n:</b> X√©t t√≠nh ƒë∆°n ƒëi·ªáu c·ªßa h√†m s·ªë ƒëa th·ª©c b·∫≠c 3.
        </div>
      </section>

      <!-- Slide 6: Ph∆∞∆°ng ph√°p -->
      <section>
        <div class="box method">
          üîë <b>Ph∆∞∆°ng ph√°p:</b>
          <ol>
            <li>T√¨m t·∫≠p x√°c ƒë·ªãnh $D$.</li>
            <li>T√≠nh ƒë·∫°o h√†m $y'$.</li>
            <li>Gi·∫£i $y'=0$ ƒë·ªÉ t√¨m ƒëi·ªÉm t·ªõi h·∫°n.</li>
            <li>L·∫≠p b·∫£ng x√©t d·∫•u $y'$.</li>
          </ol>
        </div>
      </section>

      <!-- Slide 7: V√≠ d·ª• -->
      <section>
        <div class="box example">
          üß© <b>V√≠ d·ª• minh h·ªça:</b><br>
          X√©t t√≠nh ƒë∆°n ƒëi·ªáu c·ªßa 
          $$ y = 4x^3 + 3x^2 - 36x + 6 + \frac{1}{1+x^2+x^4+x^6+x^8+x^{10}} $$
          (c√¥ng th·ª©c d√†i ƒë·ªÉ test).
        </div>
      </section>

      <!-- Slide 8: L·ªùi gi·∫£i -->
      <section>
        <div class="box solution">
          ‚úÖ <b>L·ªùi gi·∫£i:</b><br>
          $y' = 12x^2 + 6x - 36 = 6(2x^2 + x - 6) = 6(2x-3)(x+2)$ <br>
          ‚áí $y'=0$ t·∫°i $x=-2$ v√† $x=\tfrac{3}{2}$.<br>
          L·∫≠p b·∫£ng x√©t d·∫•u ‚Üí KL: H√†m s·ªë ƒë·ªìng bi·∫øn tr√™n $(-2,\tfrac{3}{2}) \cup (\tfrac{3}{2}, +\infty)$, ngh·ªãch bi·∫øn tr√™n $(-\infty,-2) \cup (\tfrac{3}{2},+\infty)$.
        </div>
      </section>

      <section>
        <h3>üìò B√ÄI T·∫¨P R√àN LUY·ªÜN</h3>
        
      </section>
      

   <!--Tr·∫Øc nghi·ªám-->   
  <section>
  <!-- Slide 1: C√¢u h·ªèi + ki·ªÉm tra -->
            <section>
            <div class="question" id="q1">
              <p><strong>C√¢u 1</strong>. Cho h√†m s·ªë $f(x)$ c√≥ b·∫£ng bi·∫øn thi√™n nh∆∞ sau:</p>
              <p><img src="data/im/30.png" alt="B·∫£ng bi·∫øn thi√™n"></p>
              <p>H√†m s·ªë ƒë√£ cho ƒë·ªìng bi·∫øn tr√™n kho·∫£ng n√†o sau ƒë√¢y?</p>

              <div class="options-row">
                <label><input type="radio" name="q1" value="A"/> A. $(-\infty;1)$ 
                  <span class="option-icon" id="icon-q1-A"></span>
                </label>
                <label><input type="radio" name="q1" value="B"/> B. $(3;+\infty)$ 
                  <span class="option-icon" id="icon-q1-B"></span>
                </label>
                <label><input type="radio" name="q1" value="C"/> C. $(1;3)$ 
                  <span class="option-icon" id="icon-q1-C"></span>
                </label>
                <label><input type="radio" name="q1" value="D"/> D. $(3;+\infty)$ 
                  <span class="option-icon" id="icon-q1-D"></span>
                </label>
              </div>

              <div class="answer-check">
                <button onclick="checkAnswer('q1','B')">Ki·ªÉm tra</button>
              </div>
            </div>
          </section>

          <!-- Slide 2: L·ªùi gi·∫£i -->
          <section>
            <div class="box solution">
              <h4>üìù C√¢u 1 - L·ªùi gi·∫£i</h4>
              <p>Ta c√≥ $y = x^2 - 4x + 5 = (x-2)^2 + 1 \geq 1$.</p>
              <p>üëâ Gi√° tr·ªã nh·ªè nh·∫•t l√† $1$ t·∫°i $x=2$.</p>
              <p>ƒê√°p √°n ƒë√∫ng: <b>B</b>.</p>
            </div>
          </section>
  </section>
  

<!-- ƒê√∫ng Sai -->
<!-- C√¢u 3 -->
  <section>
  <!-- Slide cha: C√¢u h·ªèi -->
    <section>
      <div class="question" id="q3">
        
          <p><strong>C√¢u 3</strong>. Cho h√†m s·ªë <span class="math">\( y = f(x) \)</span> li√™n t·ª•c tr√™n <span class="math">\( \mathbb{R} \)</span> v√† c√≥ b·∫£ng bi·∫øn thi√™n nh∆∞ sau:</p>
          <p><img src="data/im/t1.png" alt="B·∫£ng bi·∫øn thi√™n"></p>
          <p>Khi ƒë√≥, x√©t c√°c m·ªánh ƒë·ªÅ sau:</p>

          <div class="options">
            <div class="option-row">
              <span>a) H√†m s·ªë ƒë·ªìng bi·∫øn tr√™n c√°c kho·∫£ng <span class="math">\( (-\infty; -5) \)</span> v√† <span class="math">\( (-3; -2) \)</span>.</span>
              <label><input name="q3a" type="radio" value="ƒê√∫ng"/> ƒê√∫ng</label>
              <label><input name="q3a" type="radio" value="Sai"/> Sai</label>
            </div>

            <div class="option-row">
              <span>b) H√†m s·ªë ƒë·ªìng bi·∫øn tr√™n kho·∫£ng <span class="math">\( (-\infty; -5) \)</span>.</span>
              <label><input name="q3b" type="radio" value="ƒê√∫ng"/> ƒê√∫ng</label>
              <label><input name="q3b" type="radio" value="Sai"/> Sai</label>
            </div>

            <div class="option-row">
              <span>c) H√†m s·ªë ngh·ªãch bi·∫øn tr√™n kho·∫£ng <span class="math">\( (-2; +\infty) \)</span>.</span>
              <label><input name="q3c" type="radio" value="ƒê√∫ng"/> ƒê√∫ng</label>
              <label><input name="q3c" type="radio" value="Sai"/> Sai</label>
            </div>

            <div class="option-row">
              <span>d) H√†m s·ªë ƒë·ªìng bi·∫øn tr√™n kho·∫£ng <span class="math">\( (-\infty; -2) \)</span>.</span>
              <label><input name="q3d" type="radio" value="ƒê√∫ng"/> ƒê√∫ng</label>
              <label><input name="q3d" type="radio" value="Sai"/> Sai</label>
            </div>
          </div>

          <div class="answer-check">
            <button onclick="checkTrueFalseAnswer('q3', ['ƒê√∫ng','Sai','ƒê√∫ng','ƒê√∫ng'])">Ki·ªÉm tra</button>
            <div class="result"></div>
          </div>
        </div>
    
    </section>

  <!-- Slide con: L·ªùi gi·∫£i -->
    <section>
      <div class="box solution">
        <p><strong>C√¢u 3</strong>. Cho h√†m s·ªë <span class="math">\( y = f(x) \)</span> li√™n t·ª•c tr√™n <span class="math">\( \mathbb{R} \)</span> v√† c√≥ b·∫£ng bi·∫øn thi√™n nh∆∞ sau:</p>
          <p><img src="data/im/t1.png" alt="B·∫£ng bi·∫øn thi√™n"></p>
        ‚úÖ <b>L·ªùi gi·∫£i:</b><br>
        <ul>
          <li>a) ƒê√∫ng: H√†m s·ªë ƒë·ªìng bi·∫øn tr√™n <span class="math">\( (-\infty; -2) \)</span> n√™n c≈©ng ƒë·ªìng bi·∫øn tr√™n <span class="math">\( (-\infty; -5) \)</span> v√† <span class="math">\( (-3; -2) \)</span>.</li>
          <li>b) Sai: Kh√¥ng ch·ªâ tr√™n <span class="math">\( (-\infty; -5) \)</span>, m√† ph·∫£i tr√™n c·∫£ <span class="math">\( (-\infty; -2) \)</span>.</li>
          <li>c) ƒê√∫ng: H√†m s·ªë ngh·ªãch bi·∫øn tr√™n <span class="math">\( (-2; +\infty) \)</span>.</li>
          <li>d) ƒê√∫ng: H√†m s·ªë ƒë·ªìng bi·∫øn tr√™n <span class="math">\( (-\infty; -2) \)</span>.</li>
        </ul>
        <p>üëâ V·∫≠y ƒë√°p √°n ƒë√∫ng l√† <strong>a, c, d</strong>.</p>
      </div>
    </section>
</section>

<section>
  <!-- Slide 1: C√¢u h·ªèi + nh·∫≠p ƒë√°p √°n -->
  <section>
    <div class="question" id="q17">
      <div class="summary-box">
        <p><strong>C√¢u 17</strong>. C√¢u l·∫°c b·ªô thi·ªán nguy·ªán c·ªßa m·ªôt tr∆∞·ªùng THPT d·ª± ƒë·ªãnh l√†m c√°c b√¨nh hoa b·∫±ng gi·∫•y ƒë·ªÉ b√°n trong m·ªôt h·ªôi ch·ª£ g√¢y qu·ªπ t·ª´ thi·ªán. 
        C·∫ßn 1 gi·ªù ƒë·ªÉ l√†m m·ªôt b√¨nh hoa nh·ªè v√† s·∫Ω b√°n v·ªõi gi√° 100 ngh√¨n ƒë·ªìng, v√† 90 ph√∫t ƒë·ªÉ l√†m m·ªôt b√¨nh hoa l·ªõn v√† b√°n v·ªõi gi√° 200 ngh√¨n ƒë·ªìng. 
        Bi·∫øt r·∫±ng c√¢u l·∫°c b·ªô c√≥ 30 gi·ªù ƒë·ªÉ l√†m c√°c b√¨nh hoa v√† mu·ªën t·ªïng s·ªë b√¨nh hoa kh√¥ng qu√° 24 b√¨nh. 
        S·ªë ti·ªÅn l·ªõn nh·∫•t m√† c√¢u l·∫°c b·ªô c√≥ th·ªÉ thu ƒë∆∞·ª£c l√† bao nhi√™u tri·ªáu ƒë·ªìng?</p>
      </div>

      <div class="answer-check">
        <input type="text" id="input-q17" placeholder="Nh·∫≠p ƒë√°p √°n (ngh√¨n ƒë·ªìng)">
        <button onclick="checkShortAnswer('q17','1800')">Ki·ªÉm tra</button>
        <span id="icon-q17"></span>
        <div class="answer-feedback" id="feedback-q17"></div>
      </div>
    </div>
  </section>

  <!-- Slide 2: L·ªùi gi·∫£i -->
  <section>
    <div class="box solution">
      ‚úÖ <b>L·ªùi gi·∫£i:</b><br>
      <p>G·ªçi s·ªë b√¨nh hoa nh·ªè l√† $x$, s·ªë b√¨nh hoa l·ªõn l√† $y$.</p>
      <ul>
        <li>ƒêi·ªÅu ki·ªán: $x + y \leq 24$, $60x + 90y \leq 1800$ (ph√∫t).</li>
        <li>H√†m m·ª•c ti√™u: $P = 100x + 200y$ (ngh√¨n ƒë·ªìng).</li>
        <li>Gi·∫£i h·ªá b·∫•t ƒë·∫≥ng th·ª©c, ta ƒë∆∞·ª£c ƒëi·ªÉm c·ª±c bi√™n t·ªëi ∆∞u t·∫°i $x=6$, $y=18$.</li>
        <li>Gi√° tr·ªã l·ªõn nh·∫•t: $P = 100 \cdot 6 + 200 \cdot 18 = 1800$ (ngh√¨n ƒë·ªìng) = 1,8 tri·ªáu ƒë·ªìng.</li>
      </ul>
      <p>üëâ ƒê√°p √°n: <b>1800 (ngh√¨n ƒë·ªìng)</b>.</p>
    </div>
  </section>

</section>
 
    
<section>
        <h2>üéâ K·∫øt th√∫c b√†i gi·∫£ng</h2>
        
</section>
    
    
  
  




<!---------------------------------------------------------THE END----------------------------------------------------->
  </div>
</div>

  <!-- Canvas -->
  <canvas id="drawCanvas"></canvas>

  <!-- Toggle menu -->
  <button id="toggleMenu">‚ò∞</button>

  <!-- Toolbar -->
  <div id="toolbar" style="display:none;">
    <button id="homeBtn" title="Trang ch·ªß">üè†</button>
    <button id="toggleDraw" title="B√∫t v·∫Ω">‚úèÔ∏è</button>
    <select id="colorPicker" title="M√†u">
      <option value="yellow">üü°</option>
      <option value="white">‚ö™</option>
      <option value="red">üî¥</option>
      <option value="cyan">üîµ</option>
    </select>
    <select id="lineWidthPicker" title="ƒê·ªô d√†y">
      <option value="2">M·∫£nh</option>
      <option value="3" selected>V·ª´a</option>
      <option value="6">ƒê·∫≠m</option>
    </select>
    <button id="lineBtn" title="ƒêo·∫°n">‚ñ¨</button>
    <button id="dashedLineBtn" title="ƒêo·∫°n ƒë·ª©t">‚Äì ‚Äì</button>
    <button id="circleBtn" title="Tr√≤n">‚ö™</button>
    <button id="ellipseBtn" title="Elip">‚¨≠</button>
    <button id="undoBtn" title="Undo">‚Ü©Ô∏è</button>
    <button id="clearCanvas" title="X√≥a h·∫øt">üßπ</button>
    <button id="fullscreen" title="Full">‚õ∂</button>
  </div>

  <!-- Reveal.js -->
  <script src="https://unpkg.com/reveal.js/dist/reveal.js"></script>
  <script>Reveal.initialize({
  width: "100%",   // üëà chi·ªÅu r·ªông = full tr√¨nh duy·ªát
  height: "100%",  // üëà chi·ªÅu cao = full tr√¨nh duy·ªát
  margin: 0.02,    // kho·∫£ng tr·ªëng xung quanh (0 ‚Üí kh√¥ng vi·ªÅn tr·∫Øng)
  minScale: 0.2,
  maxScale: 2,
  slideNumber: true,
  center: false,
  hash: true,
  // c√°c c·∫•u h√¨nh kh√°c...
});
</script>

  <!-- Script v·∫Ω -->
  <script>
    const canvas=document.getElementById("drawCanvas"),ctx=canvas.getContext("2d");
    let drawing=false,mode="free",color="yellow",lineW=3,startX=0,startY=0;
    let history=[]; // l∆∞u snapshot ƒë·ªÉ Undo

    function resizeCanvas(){
      canvas.width=window.innerWidth;canvas.height=window.innerHeight;
      saveState();
    }
    resizeCanvas();window.addEventListener("resize",resizeCanvas);

    function saveState(){history.push(canvas.toDataURL());}
    function restoreState(){
      if(history.length>1){history.pop();
        let img=new Image();img.src=history[history.length-1];
        img.onload=()=>{ctx.clearRect(0,0,canvas.width,canvas.height);ctx.drawImage(img,0,0);}
      }
    }

    function startDraw(e){startX=e.clientX;startY=e.clientY;if(mode==="free"){drawing=true;ctx.beginPath();ctx.moveTo(startX,startY);}}
    function endDraw(e){
      ctx.lineWidth=lineW;
      if(mode==="line"||mode==="dashedLine"){
        ctx.setLineDash(mode==="dashedLine"?[10,5]:[]);
        ctx.strokeStyle=color;ctx.beginPath();ctx.moveTo(startX,startY);ctx.lineTo(e.clientX,e.clientY);ctx.stroke();ctx.setLineDash([]);
      }
      if(mode==="circle"||mode==="ellipse"){
        const rx=Math.abs(e.clientX-startX),ry=Math.abs(e.clientY-startY);
        ctx.strokeStyle=color;
        if(mode==="circle"){const r=Math.sqrt(rx*rx+ry*ry);ctx.beginPath();ctx.arc(startX,startY,r,0,2*Math.PI);ctx.stroke();}
        else{ctx.setLineDash([8,4]);ctx.beginPath();ctx.ellipse(startX,startY,rx,ry,0,0,2*Math.PI);ctx.stroke();ctx.setLineDash([]);}
      }
      drawing=false;saveState();
    }
    function draw(e){
      if(!drawing||mode!=="free")return;
      ctx.strokeStyle=color;ctx.lineWidth=lineW;ctx.lineCap="round";
      ctx.lineTo(e.clientX,e.clientY);ctx.stroke();
      ctx.beginPath();ctx.moveTo(e.clientX,e.clientY);
    }
    canvas.addEventListener("mousedown",startDraw);canvas.addEventListener("mouseup",endDraw);canvas.addEventListener("mousemove",draw);

    // Toolbar actions
    document.getElementById("toggleDraw").onclick=()=>{mode="free";canvas.style.pointerEvents="auto";};
    document.getElementById("lineBtn").onclick=()=>{mode="line";canvas.style.pointerEvents="auto";};
    document.getElementById("dashedLineBtn").onclick=()=>{mode="dashedLine";canvas.style.pointerEvents="auto";};
    document.getElementById("circleBtn").onclick=()=>{mode="circle";canvas.style.pointerEvents="auto";};
    document.getElementById("ellipseBtn").onclick=()=>{mode="ellipse";canvas.style.pointerEvents="auto";};
    document.getElementById("colorPicker").onchange=(e)=>color=e.target.value;
    document.getElementById("lineWidthPicker").onchange=(e)=>lineW=parseInt(e.target.value);
    document.getElementById("clearCanvas").onclick=()=>{ctx.clearRect(0,0,canvas.width,canvas.height);saveState();};
    document.getElementById("undoBtn").onclick=()=>restoreState();
    document.getElementById("fullscreen").onclick=()=>{if(!document.fullscreenElement)document.documentElement.requestFullscreen();else document.exitFullscreen();};
    document.getElementById("homeBtn").onclick=()=>{window.location.href="index.html";};
    document.getElementById("toggleMenu").onclick=()=>{
      const tb=document.getElementById("toolbar");
      tb.style.display=(tb.style.display==="none")?"flex":"none";
    };

    canvas.style.pointerEvents="none";
    saveState();
    // X·ª≠ l√Ω tr·∫Øc nghi·ªám:
          function showOptionIcon(qid, selected, correct) {
          document.querySelectorAll(`#${qid} .option-icon`).forEach(ic => ic.textContent="");
          const icon = document.getElementById(`icon-${qid}-${selected}`);
          if(icon) icon.textContent = (selected === correct) ? "‚úÖ" : "‚ùå";
        }

        function checkAnswer(qid, correct) {
          const radios = document.querySelectorAll(`input[name="${qid}"]`);
          let chosen = null;
          radios.forEach(r => { if(r.checked) chosen=r.value; });
          if(!chosen){alert("H√£y ch·ªçn m·ªôt ƒë√°p √°n!"); return;}
          showOptionIcon(qid, chosen, correct);
        }
              function checkAnswer(qid, correct) {
          // Reset t·∫•t c·∫£ icon
          document.querySelectorAll(`#${qid} .option-icon`).forEach(el => {
            el.textContent = '';
          });

          // L·∫•y l·ª±a ch·ªçn ƒë∆∞·ª£c ch·ªçn
          let chosen = document.querySelector(`input[name="${qid}"]:checked`);
          if (!chosen) return;

          let chosenVal = chosen.value;
          let iconId = `icon-${qid}-${chosenVal}`;

          // Hi·ªÉn th·ªã icon ƒë√∫ng/sai
          if (chosenVal === correct) {
            document.getElementById(iconId).textContent = '‚úÖ';
          } else {
            document.getElementById(iconId).textContent = '‚ùå';
            document.getElementById(`icon-${qid}-${correct}`).textContent = '‚úÖ'; // ƒë√°nh d·∫•u ƒë√°p √°n ƒë√∫ng
          }
        }

    function checkTrueFalseAnswer(qid, answers) {
          let rows = document.querySelectorAll(`#${qid} .option-row`);
          let resultBox = document.querySelector(`#${qid} .result`);
          let wrong = [];

          rows.forEach((row, idx) => {
            let radios = row.querySelectorAll("input[type=radio]");
            let checked = Array.from(radios).find(r => r.checked);
            if (!checked || checked.value !== answers[idx]) {
              wrong.push(idx + 1);
            }
          });

          if (wrong.length === 0) {
            resultBox.innerHTML = "‚úÖ T·∫•t c·∫£ ƒë·ªÅu ƒë√∫ng!";
            resultBox.style.color = "lightgreen";
          } else {
            resultBox.innerHTML = "‚ùå Sai ·ªü m·ªánh ƒë·ªÅ: " + wrong.join(", ");
            resultBox.style.color = "yellow";
          }
        }
  
        function checkShortAnswer(qid, correct) {
        let input = document.getElementById(`input-${qid}`);
        let feedback = document.getElementById(`feedback-${qid}`);
        let icon = document.getElementById(`icon-${qid}`);
        let val = input.value.trim();

        if (val === "") {
          feedback.textContent = "‚ö†Ô∏è B·∫°n ch∆∞a nh·∫≠p ƒë√°p √°n!";
          feedback.style.color = "yellow";
          icon.textContent = "";
          return;
        }

        if (val === correct) {
          icon.textContent = "‚úÖ";
          feedback.textContent = "Ch√≠nh x√°c!";
          feedback.style.color = "lightgreen";
        } else {
          icon.textContent = "‚ùå";
          feedback.textContent = "Sai r·ªìi, th·ª≠ l·∫°i!";
          feedback.style.color = "orange";
        }
      }

  </script>
   
</body>
</html>
