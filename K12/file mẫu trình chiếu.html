<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <title>Báº£ng giáº£ng ToÃ¡n - Demo Ä‘áº§y Ä‘á»§ (fix cÃ´ng thá»©c dÃ i)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Reveal.js CSS -->
  <link rel="stylesheet" href="https://unpkg.com/reveal.js/dist/reveal.css">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js/dist/theme/black.css" id="theme">

  <!-- MathJax -->
  <script>
    MathJax = {
      tex: { 
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$','$$'], ['\\[','\\]']]
      },
      svg: { fontCache: 'global', linebreaks: { automatic: true } },
      chtml: { linebreaks: { automatic: true } }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <!--<link rel="stylesheet" href="styles1.css">-->
  <style>
  /* ===== Ná»n báº£ng xanh ===== */
  .reveal .backgrounds { background: #1e5631; }
  .reveal section { 
    color: #fffbe7; 
    text-shadow: 1px 1px 2px #000; 
  }
 

  /* ===== Box ná»™i dung ===== */
  .box {
    padding: 12px;
    margin: 15px 0;
    border-radius: 8px;
    overflow-x: auto;       /* Cho phÃ©p cuá»™n ngang khi cÃ´ng thá»©c dÃ i */
    word-wrap: break-word;
    max-width: none;        /* bá» giá»›i háº¡n máº·c Ä‘á»‹nh */
    width: 100%;
    box-sizing: border-box; /* trÃ¡nh xung Ä‘á»™t padding */
    font-size: 26px;   /* toÃ n bá»™ ná»™i dung lá»›n hÆ¡n */
  }

  /* MathJax container */
  mjx-container {
    overflow-x: auto;
    max-width: 100%;
  }

  /* Styles cho tá»«ng loáº¡i box */
  .definition { border-left: 6px solid #3498db; background: rgba(236,245,255,0.15); }
  .theorem    { border-left: 6px solid #27ae60; background: rgba(233,247,239,0.15); }
  .note       { border-left: 6px solid #f39c12; background: rgba(254,245,231,0.15); font-style: italic;}
  .remember   { border-left: 6px solid #e67e22; background: rgba(250,230,210,0.15); font-weight: bold;}
  .dangt      { border-left: 6px solid #8e44ad; background: rgba(245,238,248,0.15); }
  .method     { border-left: 6px solid #16a085; background: rgba(229,245,242,0.15); }
  .example    { border-left: 6px solid #2c3e50; background: rgba(236,240,241,0.15); }

  /* VÃ­ dá»¥ cÃ³ lá»i giáº£i dÃ i: cho cuá»™n dá»c */
  .box.example, 
  .box.solution {
    background: rgba(255,255,255,0.15);
    border-left: 6px solid #9333ea;
    margin-top: 10px;
    max-height: 60vh;   /* giá»›i háº¡n chiá»u cao tá»‘i Ä‘a */
    overflow-y: auto;   /* thanh cuá»™n dá»c */
    padding-right: 10px;
    max-width: none;
    width: 95%;
  }

  /* ===== Quiz / Tráº¯c nghiá»‡m ===== */
  .question, .summary-box {
    max-height: 85vh;   /* full slide nhÆ°ng cÃ³ cuá»™n khi dÃ i */
    overflow-y: auto;
    padding: 12px;
    background: rgba(0,0,0,0.2);
    border-radius: 8px;
    width: 95%;
    margin: auto;
    box-sizing: border-box;
  }

  .options label {
    display: block;
    margin-bottom: 6px;
    cursor: pointer;
    line-height: 1.4;
    word-wrap: break-word;
  }

  .option-icon {
    margin-left: 6px;
  }

  .answer-check button {
    margin-top: 8px;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    background: #2563eb; 
    color: white;
    border: none;
  }

  /* Grid chia 2 cá»™t hoáº·c 3 cá»™t cho quiz */
  .quiz-grid-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    align-items: start;
  }
  .quiz-grid-3 {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 15px;
    align-items: start;
    border-left: 2px solid yellow;
    border-right: 2px solid yellow;
  }

  /* ===== Canvas overlay (báº£ng váº½) ===== */
  #drawCanvas {
    position: fixed; top: 0; left: 0;
    width: 100vw; height: 100vh;
    z-index: 10; pointer-events: none;
  }

  /* ===== Toolbar váº½ ===== */
  #toolbar {
    position: fixed; top: 50%; left: 5px; transform: translateY(-50%);
    z-index: 20; display: flex; flex-direction: column;
    background: rgba(0,0,0,0.4); padding: 4px; border-radius: 8px;
  }
  #toolbar button, #toolbar select {
    margin: 3px 0; width: 36px; height: 36px; font-size: 14px;
    text-align: center; cursor: pointer;
    background: rgba(255,255,255,0.1); border: none; border-radius: 6px;
    color: #fff;
  }
  #toolbar select { width: 42px; height: 28px; font-size: 12px; color: #000; }

  /* Toggle nÃºt menu */
  #toggleMenu {
    position: fixed; top: 10px; left: 10px; z-index: 21;
    width: 36px; height: 36px; border-radius: 50%;
    border: none; background: #0008; color: #fff; font-size: 18px;
    cursor: pointer;
  }
  /* Cho phÃ©p section chiáº¿m toÃ n bá»™ slide */
.reveal .slides section {
  max-width: 100% !important;   /* ğŸš€ bá» giá»›i háº¡n 800px */
  width: 100% !important;
  height: auto;
}

/* Box cÃ¢u há»i full chiá»u rá»™ng */
.question, .summary-box {
  width: 100% !important;   /* full ngang */
  max-width: 100% !important;
  font-size: 0.9em;         /* tÄƒng font chá»¯ cho rÃµ */
  background: rgba(0,0,0,0.2);
  padding: 15px;
  border-radius: 8px;
  box-sizing: border-box;
  margin: auto;
}

/* HÃ¬nh áº£nh trong cÃ¢u há»i: cÄƒn giá»¯a vÃ  co giÃ£n há»£p lÃ½ */
.question img, .summary-box img {
  max-width: 100%;
  height: auto;
  display: block;
  margin: 10px auto;
}
.option-row {
  display: flex;
  align-items: center;
  gap: 15px;          /* khoáº£ng cÃ¡ch giá»¯a text vÃ  nÃºt chá»n */
  margin-bottom: 8px;
}

.option-row span {
  flex: 1;            /* text chiáº¿m pháº§n cÃ²n láº¡i */
  word-wrap: break-word;
}
.option-row label {
  white-space: nowrap; /* khÃ´ng xuá»‘ng dÃ²ng chá»¯ ÄÃºng/Sai */
}


</style>

</head>
<body>
<div class="reveal">
  <div class="slides">
<!-------------Báº®T Äáº¦U Ná»˜I DUNG CÃC SLIDE-->
  <!-- TÃŠN BÃ€I -->
      <section>
        <h2>ğŸ“˜ á»¨NG Dá»¤NG Äáº O HÃ€M</h2>
        <p>MÃ´n ToÃ¡n - Lá»›p 12</p>
      </section>
  <!----LÃ THUYáº¾T-->
      <section>
        <h3>ğŸ“˜ Ná»˜I DUNG KIáº¾N THá»¨C</h3>
        
      </section>
      <!-- Slide 2: Äá»‹nh nghÄ©a -->
      <section>
        <div class="box definition">
          <b>ğŸ“˜ Äá»‹nh nghÄ©a:</b><br>
          HÃ m sá»‘ $y=f(x)$ Ä‘Æ°á»£c gá»i lÃ  <b>Ä‘á»“ng biáº¿n</b> trÃªn K náº¿u:
          $$ \forall x_1 < x_2 \in K \Rightarrow f(x_1) < f(x_2) $$
        </div>
      </section>

      <!-- Slide 3: Äá»‹nh lÃ­ -->
      <section>
        <div class="box theorem">
          <b>ğŸ“ Äá»‹nh lÃ­:</b><br>
          Náº¿u $f'(x) > 0, \forall x \in K$ thÃ¬ hÃ m sá»‘ $f(x)$ Ä‘á»“ng biáº¿n trÃªn K.
        </div>
      </section>

      <!-- Slide 4: Ghi nhá»› -->
      <section>
        <div class="box remember">
          ğŸ’¡ Ghi nhá»›: Muá»‘n xÃ©t tÃ­nh Ä‘Æ¡n Ä‘iá»‡u â†’ tÃ­nh Ä‘áº¡o hÃ m $y'$ â†’ xÃ©t dáº¥u cá»§a $y'$.
        </div>
      </section>

      <!-- Slide 5: Dáº¡ng toÃ¡n -->
      <section>
        <div class="box dangt">
          ğŸ“ <b>Dáº¡ng toÃ¡n:</b> XÃ©t tÃ­nh Ä‘Æ¡n Ä‘iá»‡u cá»§a hÃ m sá»‘ Ä‘a thá»©c báº­c 3.
        </div>
      </section>

      <!-- Slide 6: PhÆ°Æ¡ng phÃ¡p -->
      <section>
        <div class="box method">
          ğŸ”‘ <b>PhÆ°Æ¡ng phÃ¡p:</b>
          <ol>
            <li>TÃ¬m táº­p xÃ¡c Ä‘á»‹nh $D$.</li>
            <li>TÃ­nh Ä‘áº¡o hÃ m $y'$.</li>
            <li>Giáº£i $y'=0$ Ä‘á»ƒ tÃ¬m Ä‘iá»ƒm tá»›i háº¡n.</li>
            <li>Láº­p báº£ng xÃ©t dáº¥u $y'$.</li>
          </ol>
        </div>
      </section>

      <!-- Slide 7: VÃ­ dá»¥ -->
      <section>
        <div class="box example">
          ğŸ§© <b>VÃ­ dá»¥ minh há»a:</b><br>
          XÃ©t tÃ­nh Ä‘Æ¡n Ä‘iá»‡u cá»§a 
          $$ y = 4x^3 + 3x^2 - 36x + 6 + \frac{1}{1+x^2+x^4+x^6+x^8+x^{10}} $$
          (cÃ´ng thá»©c dÃ i Ä‘á»ƒ test).
        </div>
      </section>

      <!-- Slide 8: Lá»i giáº£i -->
      <section>
        <div class="box solution">
          âœ… <b>Lá»i giáº£i:</b><br>
          $y' = 12x^2 + 6x - 36 = 6(2x^2 + x - 6) = 6(2x-3)(x+2)$ <br>
          â‡’ $y'=0$ táº¡i $x=-2$ vÃ  $x=\tfrac{3}{2}$.<br>
          Láº­p báº£ng xÃ©t dáº¥u â†’ KL: HÃ m sá»‘ Ä‘á»“ng biáº¿n trÃªn $(-2,\tfrac{3}{2}) \cup (\tfrac{3}{2}, +\infty)$, nghá»‹ch biáº¿n trÃªn $(-\infty,-2) \cup (\tfrac{3}{2},+\infty)$.
        </div>
      </section>

      <section>
        <h3>ğŸ“˜ BÃ€I Táº¬P RÃˆN LUYá»†N</h3>
        
      </section>
      

   <!--Tráº¯c nghiá»‡m-->   
  <section>
  <!-- Slide 1: CÃ¢u há»i + kiá»ƒm tra -->
            <section>
            <div class="question" id="q1">
              <p><strong>CÃ¢u 1</strong>. Cho hÃ m sá»‘ $f(x)$ cÃ³ báº£ng biáº¿n thiÃªn nhÆ° sau:</p>
              <p><img src="data/im/30.png" alt="Báº£ng biáº¿n thiÃªn"></p>
              <p>HÃ m sá»‘ Ä‘Ã£ cho Ä‘á»“ng biáº¿n trÃªn khoáº£ng nÃ o sau Ä‘Ã¢y?</p>

              <div class="options-row">
                <label><input type="radio" name="q1" value="A"/> A. $(-\infty;1)$ 
                  <span class="option-icon" id="icon-q1-A"></span>
                </label>
                <label><input type="radio" name="q1" value="B"/> B. $(3;+\infty)$ 
                  <span class="option-icon" id="icon-q1-B"></span>
                </label>
                <label><input type="radio" name="q1" value="C"/> C. $(1;3)$ 
                  <span class="option-icon" id="icon-q1-C"></span>
                </label>
                <label><input type="radio" name="q1" value="D"/> D. $(3;+\infty)$ 
                  <span class="option-icon" id="icon-q1-D"></span>
                </label>
              </div>

              <div class="answer-check">
                <button onclick="checkAnswer('q1','B')">Kiá»ƒm tra</button>
              </div>
            </div>
          </section>

          <!-- Slide 2: Lá»i giáº£i -->
          <section>
            <div class="box solution">
              <h4>ğŸ“ CÃ¢u 1 - Lá»i giáº£i</h4>
              <p>Ta cÃ³ $y = x^2 - 4x + 5 = (x-2)^2 + 1 \geq 1$.</p>
              <p>ğŸ‘‰ GiÃ¡ trá»‹ nhá» nháº¥t lÃ  $1$ táº¡i $x=2$.</p>
              <p>ÄÃ¡p Ã¡n Ä‘Ãºng: <b>B</b>.</p>
            </div>
          </section>
  </section>
  

<!-- ÄÃºng Sai -->
<!-- CÃ¢u 3 -->
  <section>
  <!-- Slide cha: CÃ¢u há»i -->
    <section>
      <div class="question" id="q3">
        
          <p><strong>CÃ¢u 3</strong>. Cho hÃ m sá»‘ <span class="math">\( y = f(x) \)</span> liÃªn tá»¥c trÃªn <span class="math">\( \mathbb{R} \)</span> vÃ  cÃ³ báº£ng biáº¿n thiÃªn nhÆ° sau:</p>
          <p><img src="data/im/t1.png" alt="Báº£ng biáº¿n thiÃªn"></p>
          <p>Khi Ä‘Ã³, xÃ©t cÃ¡c má»‡nh Ä‘á» sau:</p>

          <div class="options">
            <div class="option-row">
              <span>a) HÃ m sá»‘ Ä‘á»“ng biáº¿n trÃªn cÃ¡c khoáº£ng <span class="math">\( (-\infty; -5) \)</span> vÃ  <span class="math">\( (-3; -2) \)</span>.</span>
              <label><input name="q3a" type="radio" value="ÄÃºng"/> ÄÃºng</label>
              <label><input name="q3a" type="radio" value="Sai"/> Sai</label>
            </div>

            <div class="option-row">
              <span>b) HÃ m sá»‘ Ä‘á»“ng biáº¿n trÃªn khoáº£ng <span class="math">\( (-\infty; -5) \)</span>.</span>
              <label><input name="q3b" type="radio" value="ÄÃºng"/> ÄÃºng</label>
              <label><input name="q3b" type="radio" value="Sai"/> Sai</label>
            </div>

            <div class="option-row">
              <span>c) HÃ m sá»‘ nghá»‹ch biáº¿n trÃªn khoáº£ng <span class="math">\( (-2; +\infty) \)</span>.</span>
              <label><input name="q3c" type="radio" value="ÄÃºng"/> ÄÃºng</label>
              <label><input name="q3c" type="radio" value="Sai"/> Sai</label>
            </div>

            <div class="option-row">
              <span>d) HÃ m sá»‘ Ä‘á»“ng biáº¿n trÃªn khoáº£ng <span class="math">\( (-\infty; -2) \)</span>.</span>
              <label><input name="q3d" type="radio" value="ÄÃºng"/> ÄÃºng</label>
              <label><input name="q3d" type="radio" value="Sai"/> Sai</label>
            </div>
          </div>

          <div class="answer-check">
            <button onclick="checkTrueFalseAnswer('q3', ['ÄÃºng','Sai','ÄÃºng','ÄÃºng'])">Kiá»ƒm tra</button>
            <div class="result"></div>
          </div>
        </div>
    
    </section>

  <!-- Slide con: Lá»i giáº£i -->
    <section>
      <div class="box solution">
        <p><strong>CÃ¢u 3</strong>. Cho hÃ m sá»‘ <span class="math">\( y = f(x) \)</span> liÃªn tá»¥c trÃªn <span class="math">\( \mathbb{R} \)</span> vÃ  cÃ³ báº£ng biáº¿n thiÃªn nhÆ° sau:</p>
          <p><img src="data/im/t1.png" alt="Báº£ng biáº¿n thiÃªn"></p>
        âœ… <b>Lá»i giáº£i:</b><br>
        <ul>
          <li>a) ÄÃºng: HÃ m sá»‘ Ä‘á»“ng biáº¿n trÃªn <span class="math">\( (-\infty; -2) \)</span> nÃªn cÅ©ng Ä‘á»“ng biáº¿n trÃªn <span class="math">\( (-\infty; -5) \)</span> vÃ  <span class="math">\( (-3; -2) \)</span>.</li>
          <li>b) Sai: KhÃ´ng chá»‰ trÃªn <span class="math">\( (-\infty; -5) \)</span>, mÃ  pháº£i trÃªn cáº£ <span class="math">\( (-\infty; -2) \)</span>.</li>
          <li>c) ÄÃºng: HÃ m sá»‘ nghá»‹ch biáº¿n trÃªn <span class="math">\( (-2; +\infty) \)</span>.</li>
          <li>d) ÄÃºng: HÃ m sá»‘ Ä‘á»“ng biáº¿n trÃªn <span class="math">\( (-\infty; -2) \)</span>.</li>
        </ul>
        <p>ğŸ‘‰ Váº­y Ä‘Ã¡p Ã¡n Ä‘Ãºng lÃ  <strong>a, c, d</strong>.</p>
      </div>
    </section>
</section>

<section>
  <!-- Slide 1: CÃ¢u há»i + nháº­p Ä‘Ã¡p Ã¡n -->
  <section>
    <div class="question" id="q17">
      <div class="summary-box">
        <p><strong>CÃ¢u 17</strong>. CÃ¢u láº¡c bá»™ thiá»‡n nguyá»‡n cá»§a má»™t trÆ°á»ng THPT dá»± Ä‘á»‹nh lÃ m cÃ¡c bÃ¬nh hoa báº±ng giáº¥y Ä‘á»ƒ bÃ¡n trong má»™t há»™i chá»£ gÃ¢y quá»¹ tá»« thiá»‡n. 
        Cáº§n 1 giá» Ä‘á»ƒ lÃ m má»™t bÃ¬nh hoa nhá» vÃ  sáº½ bÃ¡n vá»›i giÃ¡ 100 nghÃ¬n Ä‘á»“ng, vÃ  90 phÃºt Ä‘á»ƒ lÃ m má»™t bÃ¬nh hoa lá»›n vÃ  bÃ¡n vá»›i giÃ¡ 200 nghÃ¬n Ä‘á»“ng. 
        Biáº¿t ráº±ng cÃ¢u láº¡c bá»™ cÃ³ 30 giá» Ä‘á»ƒ lÃ m cÃ¡c bÃ¬nh hoa vÃ  muá»‘n tá»•ng sá»‘ bÃ¬nh hoa khÃ´ng quÃ¡ 24 bÃ¬nh. 
        Sá»‘ tiá»n lá»›n nháº¥t mÃ  cÃ¢u láº¡c bá»™ cÃ³ thá»ƒ thu Ä‘Æ°á»£c lÃ  bao nhiÃªu triá»‡u Ä‘á»“ng?</p>
      </div>

      <div class="answer-check">
        <input type="text" id="input-q17" placeholder="Nháº­p Ä‘Ã¡p Ã¡n (nghÃ¬n Ä‘á»“ng)">
        <button onclick="checkShortAnswer('q17','1800')">Kiá»ƒm tra</button>
        <span id="icon-q17"></span>
        <div class="answer-feedback" id="feedback-q17"></div>
      </div>
    </div>
  </section>

  <!-- Slide 2: Lá»i giáº£i -->
  <section>
    <div class="box solution">
      âœ… <b>Lá»i giáº£i:</b><br>
      <p>Gá»i sá»‘ bÃ¬nh hoa nhá» lÃ  $x$, sá»‘ bÃ¬nh hoa lá»›n lÃ  $y$.</p>
      <ul>
        <li>Äiá»u kiá»‡n: $x + y \leq 24$, $60x + 90y \leq 1800$ (phÃºt).</li>
        <li>HÃ m má»¥c tiÃªu: $P = 100x + 200y$ (nghÃ¬n Ä‘á»“ng).</li>
        <li>Giáº£i há»‡ báº¥t Ä‘áº³ng thá»©c, ta Ä‘Æ°á»£c Ä‘iá»ƒm cá»±c biÃªn tá»‘i Æ°u táº¡i $x=6$, $y=18$.</li>
        <li>GiÃ¡ trá»‹ lá»›n nháº¥t: $P = 100 \cdot 6 + 200 \cdot 18 = 1800$ (nghÃ¬n Ä‘á»“ng) = 1,8 triá»‡u Ä‘á»“ng.</li>
      </ul>
      <p>ğŸ‘‰ ÄÃ¡p Ã¡n: <b>1800 (nghÃ¬n Ä‘á»“ng)</b>.</p>
    </div>
  </section>

</section>
 
    
<section>
        <h2>ğŸ‰ Káº¿t thÃºc bÃ i giáº£ng</h2>
        
</section>
    
    
  
  




<!---------------------------------------------------------THE END----------------------------------------------------->
  </div>
</div>

  <!-- Canvas -->
  <canvas id="drawCanvas"></canvas>

  <!-- Toggle menu -->
  <button id="toggleMenu">â˜°</button>

  <!-- Toolbar -->
  <div id="toolbar" style="display:none;">
    <button id="homeBtn" title="Trang chá»§">ğŸ </button>
    <button id="toggleDraw" title="BÃºt váº½">âœï¸</button>
    <select id="colorPicker" title="MÃ u">
      <option value="yellow">ğŸŸ¡</option>
      <option value="white">âšª</option>
      <option value="red">ğŸ”´</option>
      <option value="cyan">ğŸ”µ</option>
    </select>
    <select id="lineWidthPicker" title="Äá»™ dÃ y">
      <option value="2">Máº£nh</option>
      <option value="3" selected>Vá»«a</option>
      <option value="6">Äáº­m</option>
    </select>
    <button id="lineBtn" title="Äoáº¡n">â–¬</button>
    <button id="dashedLineBtn" title="Äoáº¡n Ä‘á»©t">â€“ â€“</button>
    <button id="circleBtn" title="TrÃ²n">âšª</button>
    <button id="ellipseBtn" title="Elip">â¬­</button>
    <button id="undoBtn" title="Undo">â†©ï¸</button>
    <button id="clearCanvas" title="XÃ³a háº¿t">ğŸ§¹</button>
    <button id="fullscreen" title="Full">â›¶</button>
  </div>

  <!-- Reveal.js -->
  <script src="https://unpkg.com/reveal.js/dist/reveal.js"></script>
  <script>Reveal.initialize({
  width: "100%",   // ğŸ‘ˆ chiá»u rá»™ng = full trÃ¬nh duyá»‡t
  height: "100%",  // ğŸ‘ˆ chiá»u cao = full trÃ¬nh duyá»‡t
  margin: 0.02,    // khoáº£ng trá»‘ng xung quanh (0 â†’ khÃ´ng viá»n tráº¯ng)
  minScale: 0.2,
  maxScale: 2,
  slideNumber: true,
  center: false,
  hash: true,
  // cÃ¡c cáº¥u hÃ¬nh khÃ¡c...
});
</script>

  <!-- Script váº½ -->
  <script>
    const canvas=document.getElementById("drawCanvas"),ctx=canvas.getContext("2d");
    let drawing=false,mode="free",color="yellow",lineW=3,startX=0,startY=0;
    let history=[]; // lÆ°u snapshot Ä‘á»ƒ Undo

    function resizeCanvas(){
      canvas.width=window.innerWidth;canvas.height=window.innerHeight;
      saveState();
    }
    resizeCanvas();window.addEventListener("resize",resizeCanvas);

    function saveState(){history.push(canvas.toDataURL());}
    function restoreState(){
      if(history.length>1){history.pop();
        let img=new Image();img.src=history[history.length-1];
        img.onload=()=>{ctx.clearRect(0,0,canvas.width,canvas.height);ctx.drawImage(img,0,0);}
      }
    }

    function startDraw(e){startX=e.clientX;startY=e.clientY;if(mode==="free"){drawing=true;ctx.beginPath();ctx.moveTo(startX,startY);}}
    function endDraw(e){
      ctx.lineWidth=lineW;
      if(mode==="line"||mode==="dashedLine"){
        ctx.setLineDash(mode==="dashedLine"?[10,5]:[]);
        ctx.strokeStyle=color;ctx.beginPath();ctx.moveTo(startX,startY);ctx.lineTo(e.clientX,e.clientY);ctx.stroke();ctx.setLineDash([]);
      }
      if(mode==="circle"||mode==="ellipse"){
        const rx=Math.abs(e.clientX-startX),ry=Math.abs(e.clientY-startY);
        ctx.strokeStyle=color;
        if(mode==="circle"){const r=Math.sqrt(rx*rx+ry*ry);ctx.beginPath();ctx.arc(startX,startY,r,0,2*Math.PI);ctx.stroke();}
        else{ctx.setLineDash([8,4]);ctx.beginPath();ctx.ellipse(startX,startY,rx,ry,0,0,2*Math.PI);ctx.stroke();ctx.setLineDash([]);}
      }
      drawing=false;saveState();
    }
    function draw(e){
      if(!drawing||mode!=="free")return;
      ctx.strokeStyle=color;ctx.lineWidth=lineW;ctx.lineCap="round";
      ctx.lineTo(e.clientX,e.clientY);ctx.stroke();
      ctx.beginPath();ctx.moveTo(e.clientX,e.clientY);
    }
    canvas.addEventListener("mousedown",startDraw);canvas.addEventListener("mouseup",endDraw);canvas.addEventListener("mousemove",draw);

    // Toolbar actions
    document.getElementById("toggleDraw").onclick=()=>{mode="free";canvas.style.pointerEvents="auto";};
    document.getElementById("lineBtn").onclick=()=>{mode="line";canvas.style.pointerEvents="auto";};
    document.getElementById("dashedLineBtn").onclick=()=>{mode="dashedLine";canvas.style.pointerEvents="auto";};
    document.getElementById("circleBtn").onclick=()=>{mode="circle";canvas.style.pointerEvents="auto";};
    document.getElementById("ellipseBtn").onclick=()=>{mode="ellipse";canvas.style.pointerEvents="auto";};
    document.getElementById("colorPicker").onchange=(e)=>color=e.target.value;
    document.getElementById("lineWidthPicker").onchange=(e)=>lineW=parseInt(e.target.value);
    document.getElementById("clearCanvas").onclick=()=>{ctx.clearRect(0,0,canvas.width,canvas.height);saveState();};
    document.getElementById("undoBtn").onclick=()=>restoreState();
    document.getElementById("fullscreen").onclick=()=>{if(!document.fullscreenElement)document.documentElement.requestFullscreen();else document.exitFullscreen();};
    document.getElementById("homeBtn").onclick=()=>{window.location.href="index.html";};
    document.getElementById("toggleMenu").onclick=()=>{
      const tb=document.getElementById("toolbar");
      tb.style.display=(tb.style.display==="none")?"flex":"none";
    };

    canvas.style.pointerEvents="none";
    saveState();
    // Xá»­ lÃ½ tráº¯c nghiá»‡m:
          function showOptionIcon(qid, selected, correct) {
          document.querySelectorAll(`#${qid} .option-icon`).forEach(ic => ic.textContent="");
          const icon = document.getElementById(`icon-${qid}-${selected}`);
          if(icon) icon.textContent = (selected === correct) ? "âœ…" : "âŒ";
        }

        function checkAnswer(qid, correct) {
          const radios = document.querySelectorAll(`input[name="${qid}"]`);
          let chosen = null;
          radios.forEach(r => { if(r.checked) chosen=r.value; });
          if(!chosen){alert("HÃ£y chá»n má»™t Ä‘Ã¡p Ã¡n!"); return;}
          showOptionIcon(qid, chosen, correct);
        }
              function checkAnswer(qid, correct) {
          // Reset táº¥t cáº£ icon
          document.querySelectorAll(`#${qid} .option-icon`).forEach(el => {
            el.textContent = '';
          });

          // Láº¥y lá»±a chá»n Ä‘Æ°á»£c chá»n
          let chosen = document.querySelector(`input[name="${qid}"]:checked`);
          if (!chosen) return;

          let chosenVal = chosen.value;
          let iconId = `icon-${qid}-${chosenVal}`;

          // Hiá»ƒn thá»‹ icon Ä‘Ãºng/sai
          if (chosenVal === correct) {
            document.getElementById(iconId).textContent = 'âœ…';
          } else {
            document.getElementById(iconId).textContent = 'âŒ';
            document.getElementById(`icon-${qid}-${correct}`).textContent = 'âœ…'; // Ä‘Ã¡nh dáº¥u Ä‘Ã¡p Ã¡n Ä‘Ãºng
          }
        }

    function checkTrueFalseAnswer(qid, answers) {
          let rows = document.querySelectorAll(`#${qid} .option-row`);
          let resultBox = document.querySelector(`#${qid} .result`);
          let wrong = [];

          rows.forEach((row, idx) => {
            let radios = row.querySelectorAll("input[type=radio]");
            let checked = Array.from(radios).find(r => r.checked);
            if (!checked || checked.value !== answers[idx]) {
              wrong.push(idx + 1);
            }
          });

          if (wrong.length === 0) {
            resultBox.innerHTML = "âœ… Táº¥t cáº£ Ä‘á»u Ä‘Ãºng!";
            resultBox.style.color = "lightgreen";
          } else {
            resultBox.innerHTML = "âŒ Sai á»Ÿ má»‡nh Ä‘á»: " + wrong.join(", ");
            resultBox.style.color = "yellow";
          }
        }
  
        function checkShortAnswer(qid, correct) {
        let input = document.getElementById(`input-${qid}`);
        let feedback = document.getElementById(`feedback-${qid}`);
        let icon = document.getElementById(`icon-${qid}`);
        let val = input.value.trim();

        if (val === "") {
          feedback.textContent = "âš ï¸ Báº¡n chÆ°a nháº­p Ä‘Ã¡p Ã¡n!";
          feedback.style.color = "yellow";
          icon.textContent = "";
          return;
        }

        if (val === correct) {
          icon.textContent = "âœ…";
          feedback.textContent = "ChÃ­nh xÃ¡c!";
          feedback.style.color = "lightgreen";
        } else {
          icon.textContent = "âŒ";
          feedback.textContent = "Sai rá»“i, thá»­ láº¡i!";
          feedback.style.color = "orange";
        }
      }

  </script>
   
</body>
</html>
